import{c as e,m as t,y as a,z as n,h as r,t as o,i,o as s,ac as u,ad as l,ae as c,af as f,Y as d,G as m,ag as h,B as p,ah as b,ai as g,aj as v,ak as y,al as w,f as k,am as C,an as L,ao as D,ap as M,A,aq as V,a1 as S,S as B,v as H,a9 as N,a2 as G,ar as x,as as T,O as E,u as j,C as P,at as F,au as O,av as R,aw as I,ax as _,q,a as Y,I as z,ay as K,az as U,aA as Q,aB as W,aC as J,aD as Z,l as X,U as ee,M as te,aE as ae,a4 as ne,aF as re,aG as oe,aH as ie,aI as se,aJ as ue,aK as le,aL as ce,aM as fe,aN as de,aO as me}from"./calfSystem-2741d97b.js"
import{i as he}from"./isArray-aedaa0a2.js"
import{n as pe}from"./numberIsNaN-ed994c04.js"
import{r as be,a as ge}from"./roundToString-e25430bc.js"
import{p as ve}from"./playerName-5fbf0efe.js"
import{c as ye}from"./createInput-0f2d72fe.js"
import{i as we}from"./insertTextBeforeEnd-c1340608.js"
import"./testRange-77e2a09c.js"
import{t as ke}from"./testQuant-119f1f7b.js"
import{a as Ce}from"./addCommas-ea41e3ec.js"
import{c as Le}from"./createLabel-6c3713b4.js"
import{i as De}from"./insertElementBefore-1ac41a54.js"
import"./currentGuildId-2c5ea0ad.js"
import"./intValue-1a593541.js"
import{v as Me}from"./valueText-9aacf9d4.js"
import"./fshOpen-591841c3.js"
import{o as Ae}from"./openQuickBuffByName-85bc7291.js"
import"./createUl-f9269e30.js"
import{g as Ve,s as Se}from"./idb-cb4fc9f9.js"
import"./isChecked-c01a2e4d.js"
import{b as Be}from"./simpleCheckbox-7770c555.js"
import{c as He}from"./createTable-55e71028.js"
import{p as $e}from"./padZ-7a081566.js"
import{c as Ne}from"./createButton-3011f1ad.js"
import"./createLi-31c092b1.js"
import{c as Ge}from"./createStyle-2abef2bf.js"
import{c as xe}from"./createSpan-b0f81047.js"
import{h as Te}from"./hideElement-6a4f37a8.js"
import"./indexAjaxJson-2aa42945.js"
import"./cmdExport-b57576c3.js"
import"./csvSplit-566a136d.js"
import{s as Ee}from"./shouldBeArray-f8476c4b.js"
import{g as je}from"./getArrayByClassName-3946388a.js"
import{t as Pe}from"./toggleForce-69a79716.js"
import{a as Fe}from"./all-75af160a.js"
import{e as Oe}from"./eventHandler5-4a446ff3.js"
import{h as Re}from"./hasClasses-199569ee.js"
import{i as Ie}from"./insertElementAfter-7975ede1.js"
import{g as _e}from"./getProfile-4599c389.js"
import{m as qe}from"./myStats-34e94e53.js"
import{g as Ye}from"./guild-579c1e27.js"
import{a as ze}from"./allthen-dcd66ca6.js"
import"./isSelected-be4c873a.js"
import{r as Ke}from"./rnd-3f660ce9.js"
import{g as Ue}from"./getMembrList-864a54a8.js"
import{d as Qe,g as We}from"./getGroupStats-b72badc6.js"
import"./groupViewStats-31925435.js"
import{g as Je}from"./getMercStats-88bd6192.js"
import{b as Ze}from"./bitwiseAnd-602b9d13.js"
import{r as Xe}from"./reduceBuffArray-02ee718a.js"
import{g as et,a as tt}from"./getTitanString-2e71ad60.js"
import{d as at,q as nt}from"./quickbuffSuccess-4959940b.js"
import{a as rt}from"./huntingBuffs-936d96d1.js"
let ot,it,st,ut,lt,ct,ft,dt,mt
function ht(e){return e}function pt(n){if(function(t){return e.showBuffInfo&&t.some(ht)}(n))return function(){if(ot)Pe(ot,!1)
else{ot=t({className:"fshActionBox",innerHTML:"<div></div><div></div><div></div><div></div><div></div><div></div>"})
const e=a("actionContainer")
Ie(ot,e.children[2])}return ot}()
ot&&Pe(ot,!0)}function bt(e,t){it?Pe(it,!1):function(e){it=e.children[3],it.className="fshBlue",n("CA ",it),st=xe(),r(it,st),we(it," active")}(e),n(t.level,st)}function gt(e,t){t?bt(e,t):it&&Pe(it,!0)}function vt(e,t){ut?Pe(ut,!1):function(e){ut=e.children[4],ut.className="fshRed",n("Doubler ",ut),lt=xe(),r(ut,lt),we(ut," active")}(e),n(t.level,lt)}function yt(e,t){t?vt(e,t):ut&&Pe(ut,!0)}function wt(e,t,a){ct?Pe(ct,!1):function(e){ct=e.children[2],n("Damage bonus: ",ct),ft=xe(),r(ct,ft),we(ct,"%")}(e),n(function(e,t){if(e){const a=Math.min(.01*Math.round(Math.floor(t/5)*Number(e.level)),20)
return be(a,2).toString()}return"0"}(t,Number(a)),ft)}function kt(e,t,a){t?wt(e,t,a):ct&&Pe(ct,!0)}function Ct(e,t){n(Ce(e),t)}function Lt(e,t){dt?Pe(dt,!1):function(e){dt=e.children[1],n("Kill Streak: ",dt),mt=xe(),r(dt,mt)}(e),Ct(t,mt)}function Dt(e,t,a,n){t||a?Lt(e,n):dt&&Pe(dt,!0)}function Mt(e,t){return t.name===e}function At(e){const{buffs:t}=GameData.player()
if(t)return t.find(o(Mt,e))}const Vt=["red","orange","yellow"]
let St,Bt
function Ht(e){nt(e)&&GameData.fetch(u)}function $t(){At("Summon Shield Imp")||at([ve()],[55]).then(Ht)}const Nt=["imp-0","imp-1","imp-1"]
function Gt(e,t){St?Pe(St,!1):function(e){St=e.children[0],n("Shield Imps Remaining: ",St),Bt=xe(),r(St,Bt),i(St,"&nbsp;")
const t=xe({className:"xSmallLink",textContent:"Recast"})
r(St,t),s(t,$t)}(e)
const a=function(e){return e?Number(e.stack):0}(t)
St.className=function(e){return Nt[e]||"fshGreen"}(a),n(a,Bt)}function xt(e,t,a){t||a?Gt(e,t):St&&Pe(St,!0)}function Tt(e){return 0===e.type}function Et(e){return xe({textContent:e})}let jt,Pt,Ft,Ot,Rt,It,_t,qt,Yt,zt
function Kt(e,t){jt?Pe(jt,!1):function(e,t){jt=e.children[5],n("Teleport Cooldown: ",jt),Pt=Et(t.toString()),r(jt,Pt)}(e,t)}function Ut(){const e=Math.max(Math.ceil((Ft-Date.now())/1e3),0)
n(e,Pt),e>0&&setTimeout(Ut,500)}function Qt(e,t){t?Kt(e,t):jt&&Pe(jt,!0)}function Wt(){Ot=At("Death Dealer"),Rt=At("Doubler"),It=At("Counter Attack"),_t=At("Summon Shield Imp"),qt=function(){const e=GameData.player().teleportCooldown
return e>1&&e}(),Yt=function(){const{dynamic:e}=GameData.realm()
return he(e)&&e.some(Tt)}(),zt=GameData.player().killStreak}function Jt(){!function(){const e=$("#actionlist-shield-imp")
1===e.length&&e.css("background-color",Vt[e.text()]||"#ad8043")}(),Wt()
const e=pt([Ot,Rt,It,_t,qt,Yt])
e&&(xt(e,_t,Ot),Dt(e,Ot,Yt,zt),kt(e,Ot,zt),gt(e,It),yt(e,Rt),Qt(e,qt))}function Zt(e,t){var a
a=t.player.teleportCooldown,Pt&&(Ft=Date.now()+1e3*a,Ut())}const Xt=["Breaker","Protection","Master Thief","Protect Gold","Disarm","Duelist","Thievery","Master Blacksmith","Master Crafter","Fury Caster","Master Inventor","Sustain"]
let ea,ta=[]
function aa(e){54!==e.id&&26!==e.id||(ea.player.buffs[e.id]=parseInt(e.level,10))}function na(e){-1===Xt.indexOf(e.name)&&(ea.player.enhancements[e.name]=e.value)}function ra(e,t){ea={},ea.combat=t.response.data,ea.combat.inventory_id&&(ea.combat.drop=ea.combat.item.id),ea.player={},ea.player.buffs={},ea.player.enhancements={},function(e){e.player.buffs&&e.player.buffs.forEach(aa)}(t),function(e){e.player.enhancements&&e.player.enhancements.forEach(na)}(t),ea.time=t.time,ta.push(ea),Se("fsh_combatLog",ta)}function oa(e,t){0===t.response.response&&ra(0,t)}function ia(e){e&&(ta=e),$.subscribe(h,oa)}function sa(t){return e.doNotKillList.includes(t.trim())}function ua(e){e.classList.toggle("fshBlue",sa(p(e)))}function la(){const e=a("actionList")
je("creature",e).forEach(ua)}function ca(e){const t=GameData.actions()[e]
if(t)return function(e,t){if(sa(e))return a("actionList").children[t].children[0].children[1].classList.remove("loading"),!0}(t.data.name,e)}const fa={2:function(e){return function(t,a,n,r){ca(n.passback)||e(t,a,n,r)}}}
function da(e){return function(t,a,n,r){const o=fa[t];(function(e){return e&&b(e)})(o)&&function(e){return g(e)||0===e}(r)?o(e)(t,a,n,r):e(t,a,n,r)}}function ma(){window.GameController&&GameController.Realm&&!GameController.Realm.footprintTileList&&(GameController.Realm.footprintTileList=[])}function ha(e,t,a){return Le({className:"fshCurveEle fshCurveLbl fshPoint tip-static "+e,dataset:{tipped:t},htmlFor:a})}function pa(e){const a=t({className:"fshToggle"}),n=ye({checked:e.prefVal,id:e.checkId,type:"checkbox"})
r(a,n)
const o=ha(e.onClass,e.onTip,e.checkId)
r(a,o)
const i=ha(e.offClass,e.offTip,e.checkId)
return r(a,i),r(e.worldName,a),n}let ba,ga,va,ya,wa,ka,Ca,La,Da
function Ma(e){return e?e.toString():"?"}function Aa(e){const a=t({className:"fshFsty"})
r(a,function(){const e=t({textContent:"Min Lvl: "})
return ga=Et(Ma(GameData.realm().minlevel)),r(e,ga),e}()),r(a,function(){const e=t({textContent:"Your Lvl: "})
return va=Et(Ma(GameData.player().level)),r(e,va),e}()),r(e,a)}function Va(e,t,a){const n=Ne({className:"fshCurveEle fshCurveBtn fshPoint tip-static "+e,dataset:{tipped:t}})
return r(a,n),n}function Sa(){var t
Aa(t=ba),ya=Va("fshFormGroup","Quick Create Attack Group",t),wa=Va("fshQuickBuff","Open Quick Buff Popup",t),ka=Va("fshRealmMap","Open Realm Map",t),Ca=Va("fshTempleOne","Search map in Ultimate FSG",t),function(e){if(m("showSpeakerOnWorld")){const t=m("playNewMessageSound")
La=pa({prefVal:t,checkId:"fshSoundCheck",onClass:"soundOn",onTip:"Turn Off Sound when you have a new log message",offClass:"soundOff",offTip:"Turn On Sound when you have a new log message",worldName:e})}}(ba),function(t){const a=e.huntingMode
Da=pa({prefVal:a,checkId:"fshHuntCheck",onClass:"huntOn",onTip:"Hunting mode is ON",offClass:"huntOff",offTip:"Hunting mode is OFF",worldName:t})}(ba)}const Ba=[[e=>e===La,function(){d("playNewMessageSound",!m("playNewMessageSound"))}],[e=>e===Da,function(){e.huntingMode=!e.huntingMode,d("huntingMode",e.huntingMode)}]],Ha=[[e=>e===ya,function(e){C(e),GameData.doAction(12,401,{},0)}],[e=>e===wa,function(){Ae(ve())}],[e=>e===ka,function(){window.open(L+D+"map","fsMap")}],[e=>e===Ca,function(){const e=GameData.realm()
window.open(`${M}realms${D}view&realm_id=${e.id}`,"mapUfsg")}]]
function $a(){ba||(ba=t({className:"fshCurveContainer",id:"fshWorldButtonContainer"}),Sa(),s(ba,Oe(Ha)),k(ba,"change",Oe(Ba)),De(ba,a("worldCoord")))}function Na(e,t){ga&&t.b.minlevel&&(ma(),n(t.b.minlevel,ga))}function Ga(e,t){va&&n(t.b,va)}function xa(e){return!e||!e.response||!e.response.data}let Ta,Ea,ja,Pa,Fa,Oa,Ra,Ia,_a,qa,Ya,za,Ka,Ua,Qa,Wa,Ja,Za,Xa,en,tn,an,nn,rn,on,sn,un,ln,cn,fn,dn,mn,hn,pn,bn
function gn(e){return e.player_name}function vn(e){!function(e){Pa=e.defenders.map(gn)}(e),Ta?A("",Ta):Ta=t({className:"body"}),function(e){Ea=t({className:"fshFloatLeft fshRelicLeftDiv"}),r(Ta,Ea),e.is_owner&&r(Ea,Qe(Pa)),ja=Ne({className:"custombutton",textContent:"Fetch Stats"}),r(Ea,ja)}(e)
const n=a("dialog-relic")
r(n,Ta)}const yn=[e=>"lastUpdate"!==e,e=>!Pa.includes(e),e=>Fa[e].last_login,e=>Number(Fa[e].last_login)<Oa,e=>Number(Fa[e].last_login)>Ra,e=>Fa[e].level<400||Fa[e].level>421,e=>Fa[e].level<441||Fa[e].level>450]
function wn(e,t){return t(e)}function kn(e){return yn.every(o(wn,e))}function Cn(e){return`<a href="${S}${Fa[e].id}">${e}</a>`}function Ln(e){Fa=e,Oa=B-120,Ra=B-604800
const t=V(Fa).filter(kn).map(Cn)
i(Ta,'<div class="fshFloatLeft fshRelicLowDiv"><table class="relicT"><thead><tr><th>'+t.length.toString()+" Offline guild members not at relic:</th></tr></thead>"+`<tbody><tr><td>${t.join(" ")}</td></tr></tbody></table></div>`)}function Dn(e){Te(ja)
const n=m("hideRelicOffline")
e.is_owner&&!n&&Ue(!0).then(Ln),i(Ea,'<table class="relicT"><thead><tr><th colspan="2">Processing</th></tr></thead><tbody><tr><td class="fshGreen" colspan="2" id="ProcessingStatus">Parsing defending guild stats ...</td></tr></tbody><thead><tr><th colspan="2">Assumptions</th></tr></thead><tbody><tr><td colspan="2" class="fshGrey">Above calculations include Constitution, Fortitude, Nightmare Visage, Chi Strike, Sanctuary, Terrorize and Flinch bonus calculations (in that order) on both the defending group and attacking group.</td></tr></tbody></table>'),bn=a("ProcessingStatus")
const o=t({className:"fshFloatLeft fshRelicMidDiv",innerHTML:'<table class="relicT relicS"><thead><tr><th colspan="2">Defending Guild Stats</th></tr></thead><tbody><tr><td>Relic Count:</td><td id="relicCount">0</td></tr><tr><td>Lead Defender Bonus:</td><td id="LDPercentage">0</td></tr><tr><td>Lead Defender Cloaked:</td><td id="LDCloaked">No</td></tr></tbody><thead><tr><th colspan="2">Other Defender Stats</th></tr></thead><tbody><tr><td>Raw Attack:</td><td class="fshGrey" id="attackValue">0</td></tr><tr><td>Attack w/ buffs:</td><td id="attackValueBuffed">0</td></tr><tr><td>Raw Defense:</td><td class="fshGrey" id="defenseValue">0</td></tr><tr><td>Defense w/buffs:</td><td id="defenseValueBuffed">0</td></tr><tr><td>Raw Armor:</td><td class="fshGrey" id="armorValue">0</td></tr><tr><td>Armor w/ buffs:</td><td id="armorValueBuffed">0</td></tr><tr><td>Raw Damage:</td><td class="fshGrey" id="damageValue">0</td></tr><tr><td>Damage w/ buffs:</td><td id="damageValueBuffed">0</td></tr><tr><td>Raw HP:</td><td class="fshGrey" id="hpValue">0</td></tr><tr><td>HP w/ buffs:</td><td id="hpValueBuffed">0</td></tr><tr><td>Cloaked:</td><td id="defendersCloaked">0</td></tr><tr><td>Processed:</td><td id="defendersProcessed">0</td></tr></tbody></table>'})
r(Ta,o),Ia=a("relicCount"),_a=a("LDPercentage"),qa=a("LDCloaked"),Ya=a("attackValue"),za=a("attackValueBuffed"),Ka=a("defenseValue"),Ua=a("defenseValueBuffed"),Qa=a("armorValue"),Wa=a("armorValueBuffed"),Ja=a("damageValue"),Za=a("damageValueBuffed"),Xa=a("hpValue"),en=a("hpValueBuffed"),tn=a("defendersCloaked"),an=a("defendersProcessed")
const s=t({className:"fshFloatLeft fshRelicRightDiv",innerHTML:'<table class="relicT relicS"><thead><tr><th colspan="2">Adjusted defense values</th></tr></thead><tbody><tr><td>DC225:</td><td id="DC225">0</td></tr><tr><td>DC175:</td><td id="DC175">0</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody><thead><tr><th colspan="2">Attacking Group Stats</th></tr></thead><tbody><tr><td>Raw Group Attack:</td><td class="fshGrey" id="GroupAttack"></td></tr><tr><td>Group Attack w/ buffs:</td><td id="GroupAttackBuffed"></td></tr><tr><td>Raw Group Defense:</td><td class="fshGrey" id="GroupDefense"></td></tr><tr><td>Group Defense w/ buffs:</td><td id="GroupDefenseBuffed"></td></tr><tr><td>Raw Group Armor:</td><td class="fshGrey" id="GroupArmor"></td></tr><tr><td>Group Armor w/ buffs:</td><td id="GroupArmorBuffed"></td></tr><tr><td>Raw Group Damage:</td><td class="fshGrey" id="GroupDamage"></td></tr><tr><td>Group Damage w/ buffs:</td><td id="GroupDamageBuffed"></td></tr><tr><td>Raw Group HP:</td><td class="fshGrey" id="GroupHP"></td></tr><tr><td>Group HP w/ buffs:</td><td id="GroupHPBuffed"></td></tr></tbody></table>'})
r(Ta,s),nn=a("DC225"),rn=a("DC175"),on=a("GroupAttack"),sn=a("GroupAttackBuffed"),un=a("GroupDefense"),ln=a("GroupDefenseBuffed"),cn=a("GroupArmor"),fn=a("GroupArmorBuffed"),dn=a("GroupDamage"),mn=a("GroupDamageBuffed"),hn=a("GroupHP"),pn=a("GroupHPBuffed")}let Mn
function An(e){const t=H(e),a=N('#pCC img[src*="/relics/"]',t).length
var r
n(a,Ia),Mn=1===(r=a)?1.5:be(1-r/10,2),n(String(100*Mn)+"%",_a)}function Vn(e,t){return e>10*t||e<t?e:10*t}const Sn=[["levelValue","level"],["attackValue","attack"],["attackBonus","bonus_attack"],["defenseValue","defense"],["defenseBonus","bonus_defense"],["armorValue","armor"],["armorBonus","bonus_armor"],["damageValue","damage"],["damageBonus","bonus_damage"],["hpValue","hp"],["hpBonus","bonus_hp"],["killStreakValue","killstreak"]]
function Bn(e,t,a){e[a[0]]=Number(t[a[1]])}const Hn=[["counterAttackLevel","Counter Attack"],["doublerLevel","Doubler"],["deathDealerLevel","Death Dealer"],["darkCurseLevel","Dark Curse"],["holyFlameLevel","Holy Flame"],["constitutionLevel","Constitution"],["sanctuaryLevel","Sanctuary"],["flinchLevel","Flinch"],["nightmareVisageLevel","Nightmare Visage"],["superEliteSlayerLevel","Super Elite Slayer"],["fortitudeLevel","Fortitude"],["chiStrikeLevel","Chi Strike"],["terrorizeLevel","Terrorize"],["barricadeLevel","Barricade"],["reignOfTerrorLevel","Reign Of Terror"],["anchoredLevel","Anchored"],["severeConditionLevel","Severe Condition"],["entrenchLevel","Entrench"],["cloakLevel","Cloak"]]
function $n(e,t,a){e[a[0]]=t[a[1]]||0}function Nn(e){const t=Xe(e._skills),a={}
return function(e,t){Sn.forEach(o(Bn,e,t))}(a,e),function(e,t){Hn.forEach(o($n,e,t))}(a,t),a.superEliteSlayerMultiplier=be(.002*a.superEliteSlayerLevel,2),pe(a.armorValue)&&function(e){e.attackValue=Vn(e.attackBonus,e.levelValue),e.defenseValue=Vn(e.defenseBonus,e.levelValue),e.armorValue=Vn(e.armorBonus,e.levelValue),e.damageValue=Vn(e.damageBonus,e.levelValue),e.hpValue=e.hpBonus}(a),a}let Gn,xn,Tn,En,jn,Pn,Fn,On,Rn,In,_n,qn,Yn,zn
function Kn(e){return Math.round(e*Mn)}function Un(){Ct(Gn,Ya),Ct(Tn,Ka),Ct(En,Qa),Ct(jn,Ja),Ct(Fn,Xa),n(On,tn),Rn+=1,n(Rn,an)}function Qn(e){const t=function(e){return Math.ceil(_n.attack*(.0025*G(e["Nightmare Visage"],0)))}(e)
_n.attack-=t,function(){const e=Math.ceil(_n.attack*In.flinchLevel*.001)
Ct(_n.attack-e,sn)}()
const a=function(e){return Math.ceil(_n.defense*(1+.001*G(e.Constitution,0)))}(e)
Ct(a+t,ln),function(e){Ct(_n.armor+Math.floor(_n.armor*G(e.Sanctuary,0)*.001),fn)}(e)
const n=function(e,t){return Math.ceil(t*G(e.Fortitude,0)*.001)}(e,a)
!function(e){Ct(_n.hp+e,pn)}(n),function(e,t){const a=Math.ceil((_n.hp+t)*G(e["Chi Strike"],0)*.001),n=Math.ceil(_n.damage*In.terrorizeLevel*.001)
Ct(_n.damage+a-n,mn)}(e,n)}function Wn(){n("Processing attacking group stats ... ",bn),qn&&(_n.attack-=qn.attack,_n.defense-=qn.defense,_n.armor-=qn.armor,_n.damage-=qn.damage,_n.hp-=qn.hp),Ct(_n.attack,on),Ct(_n.defense,un),Ct(_n.armor,cn),Ct(_n.damage,dn),Ct(_n.hp,hn)
const e=Xe(GameData.player().buffs)
Qn(e),function(e){const t=Math.ceil(xn*G(e.Flinch,0)*.001)
Ct(xn-t,za)}(e),function(e){const t=Math.ceil(Pn*G(e.Terrorize,0)*.001)
Ct(Pn-t,Za)}(e),n("Done.",bn)}function Jn(){n("Processing defending guild stats ... ",bn),Gn+=Kn(In.attackValue),Tn+=Kn(In.defenseValue),En+=Kn(In.armorValue),jn+=Kn(In.damageValue),Fn+=Kn(In.hpValue),Un()
const e=Math.ceil(Gn*(.0025*In.nightmareVisageLevel))
!function(e){xn=Gn-e,Ct(xn,za)}(e)
const t=Math.ceil(Tn*(1+.001*In.constitutionLevel))
!function(e,t){const a=t+e
Ct(a,Ua),Ct(Math.ceil(.55*a),nn),Ct(Math.ceil(.65*a),rn)}(e,t),Ct(En+Math.floor(En*In.sanctuaryLevel*.001),Wa)
const a=Fn+function(e){return Math.ceil(e*In.fortitudeLevel*.001)}(t)
Ct(a,en),function(e){Pn=jn+Math.ceil(e*In.chiStrikeLevel*.001),Ct(Pn)}(a),0!==In.cloakLevel&&n("Yes",qa),GameData.player().hasGroup&&_n?Wn():n("Done.",bn)}function Zn(e){const t=Nn(e)
Gn+=Math.round(t.attackValue*x),Tn+=Math.round(t.defenseValue*x),En+=Math.round(t.armorValue*x),jn+=Math.round(t.damageValue*x),Fn+=Math.round(t.hpValue*x),0!==t.cloakLevel&&(On+=1),Un()}function Xn(e){In=Nn(e)}function er(e){_n=e}function tr(e){qn=e}function ar(e){n(e.message,bn)}function nr(e){const t=H(e),a=P('#pCC a[href*="confirmDisband"]',t)
if(!a)return
const n=function(e){const t=e.previousElementSibling.href,a=[We(t).then(er)]
return function(e){return-1!==e.parentNode.parentNode.previousElementSibling.previousElementSibling.innerHTML.indexOf('"#000099"')}(e)&&a.push(Je().then(tr)),a}(a)
return Fe(n)}function rr(e,t){return 0===t?_e(e).then(Xn):_e(e).then(Zn).catch(ar)}function or(){let e=[j({cmd:"guild",subcmd:"view",guild_id:Yn.controlled_by.guild_id}).then(An)]
return GameData.player().hasGroup&&e.push(j({cmd:"guild",subcmd:"groups"}).then(nr)),e=e.concat(Pa.map(rr)),e}function ir(){Dn(Yn),Gn=0,Tn=0,En=0,jn=0,Fn=0,On=0,Rn=0
const e=or()
ze(e,Jn)}function sr(e,t){xa(t)||(Yn=t.response.data,Yn.defenders.length>0&&(vn(Yn),E(ja,"click",ir)))}function ur(e){$("#statbar-gold").css("background-color",e)}function lr(){$("#HelperSendTotal").html(Ce(m("currentGoldSentTotal"))),Number(GameData.player().gold)>zn?ur("red"):ur("inherit")}function cr(){zn=m("goldAmount"),$("#statbar-gold-tooltip-general").append(`<dt class="stat-gold-sendTo">Send To:</dt><dd id="HelperSendTo">${m("goldRecipient")}</dd><dt class="stat-gold-sendAmt">Amount:</dt><dd id="HelperSendAmt">${Ce(zn)}</dd><dt class="stat-gold-sendTo">Send?</dt><dd><input id="HelperSendGold" value="Send!" class="custombutton" type="submit"><input type="hidden" id="xc" value=""</dd><dt class="stat-gold-sendTotal">Total Sent:</dt><dd id="HelperSendTotal">${Ce(m("currentGoldSentTotal"))}</dd>`),$("#HelperSendGold").on("click",R),lr(),$.subscribe(I,lr)}function fr(e){return _({cache:!1,url:"fetchdata.php",data:q(e,{fshrnd:Ke()}),dataType:"json"})}const dr=[]
function mr(e){return xa(e)||dr.push(e),e}function hr(e,t){return e===Number(t.response.data.id)}function pr(e,t){e(t)}function br(e,t){const a=dr.find(o(hr,e))
return a?function(e){return new Promise(t=>{Y(3,pr,[t,e])})}(a):fr({a:1,id:e,passback:t}).then(mr)}let gr,vr,yr,wr,kr,Cr
function Lr(e,t){return Me(z(t,e))}function Dr(){var e
gr=GameData.player().level,e=a("statbar-character-tooltip-stats"),yr=Lr(e,J),vr=Lr(e,K),kr=Lr(e,U),wr=Lr(e,Q),Cr=Lr(e,W)}function Mr(e){return`<tr><td colspan="2">${e.name}:</td><td colspan="2">${e.value}</td></tr>`}function Ar(e,t,a){return function(e){return`<table><tr><td><img src="${Z}creatures/${e.image_id}.png" height="200" width="200"></td><td rowspan="2"><table width="400"><tr><td class="header" colspan="4" class="fshCenter">Statistics</td></tr>`}(e)+function(e,t){return`<tr><td>Class:&nbsp;</td><td width="40%">${e.creature_class}</td><td>Level:&nbsp;</td><td width="40%">${e.level} (your level:<span class="${t}">${gr}</span>)</td></tr>`}(e,a)+function(e){return`<tr><td>Attack:&nbsp;</td><td width="40%">${e.attack} (your defense:<span class="fshYellow">${vr}</span>)</td><td>Defense:&nbsp;</td><td width="40%">${e.defense} (your attack:<span class="fshYellow">${yr}</span>)</td></tr>`}(e)+function(e){return`<tr><td>Armor:&nbsp;</td><td width="40%">${e.armor} (your damage:<span class="fshYellow">${wr}</span>)</td><td>Damage:&nbsp;</td><td width="40%">${e.damage} (your armor:<span class="fshYellow">${kr}</span>)</td></tr>`}(e)+function(e,t){return`<tr><td>HP:&nbsp;</td><td width="40%">${e.hp} (your HP:<span class="fshYellow">${Cr}</span>)(1H: <span class="fshRed">${t}</span>)</td><td>Gold:&nbsp;</td><td width="40%">${e.gold}</td></tr>`}(e,t)+'<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Enhancements</td></tr>'+function(e){return 0===e.enhancements.length?'<tr><td colspan="4">[no enhancements]</td></tr>':e.enhancements.map(Mr).join("")}(e)+function(e){return`<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Description</td></tr><tr><td colspan="4">${e.description}</td></tr><tr><td colspan="4" height="5"></td></tr></table></td></tr><tr><td class="fshCenter"><b>${e.name}</b></td></tr></table>`}(e)}function Vr(t){if(!xa(t))return function(t){const a=Math.ceil(t.hp*e.hpVariable+t.armor*e.generalVariable)
let n="fshYellow"
return Dr(),gr>t.level&&(n="fshRed"),Ar(t,a,n)}(t.response.data)}const Sr=["verb","view","tip-static"]
function Br(e,t){const a=Vr(t)
e.set("content.text",a)}function Hr(e,t,a){return br(GameData.actions()[e].data.id,e).then(o(Br,a)),"Loading..."}function $r(e,t){ee("NewMap","CreatureInfo")
const a=te((n=t).parentNode.children).indexOf(n)
var n,r,i
e.classList.add("fshTip"),r=e,i=o(Hr,a),$(r).qtip({overwrite:!0,show:{event:"mouseover",ready:!0},style:{classes:"qtip-tipsy qtip-custom"},position:{my:"center right",at:"center left",effect:!1,viewport:$(window)},content:{text:i},hide:{effect:!1}})}function Nr(t){if(!e.showCreatureInfo)return
const{target:a}=t,n=a.parentNode.parentNode.parentNode;(function(e,t){return Re(Sr,e)&&!X("fshTip",e)&&X("creature",t)})(a,n)&&$r(a,n)}function Gr(){return Ye({subcmd:"scouttower"})}function xr(e,t){const a=e.insertCell(-1)
return[a.colSpan]=t,t[2]&&(a.className="header"),r(a,t[1]),a}function Tr(e,t,a){const n=e.insertRow(-1)
return a&&(n.className="fshBlue"),function(e,t){t.forEach(o(xr,e))}(n,t),n}function Er(e,t){Tr(e,t[0],t[1])}function jr(e,t){t.forEach(o(Er,e))}let Pr,Fr,Or,Rr,Ir,_r,qr,Yr,zr,Kr,Ur,Qr,Wr,Jr,Zr,Xr,eo,to,ao,no,ro,oo,io,so,uo,lo,co,fo
function mo(){Fr=Et("Current"),Or=Et("Kills"),Rr=Et("Member"),Ir=Et("% of Total"),_r=Et("Status"),qr=Et("Titan HP"),Yr=Et("Total"),zr=Et("Your Guild")}function ho(){for(;eo.rows.length>7;)eo.deleteRow(7)}function po(){const e=xe()
return r(e,Kr),we(e,"/"),r(e,Ur),e}function bo(e){const t=xe()
return r(t,e),we(t,"%"),t}function go(){ao=null,to&&!X("fshHide",to)&&(Pe(to,!0),n("",Kr),n("",Ur),n("",Qr),n("",Wr),n("",Jr),A("",Zr),A("",Xr),ho())}function vo(e){return 0===e.type&&(ao=e.base_creature_id,!0)}function yo(){if(to)Pe(to,!1)
else{const e=a("actionContainer")
to=t({className:"fshActionBox titanInfo"}),Kr=xe(),Ur=xe(),Qr=xe(),Wr=xe(),Jr=xe(),Zr=xe(),Xr=xe(),eo=He({className:"fshCenter"}),mo(),jr(eo,[[[[2,qr,!0],[4,zr,!0]]],[[[2,po()],[4,Qr]]],[[[2,Fr,!0],[4,bo(Wr)]],!0],[[[2,Yr,!0],[4,bo(Jr)]],!0],[[[2,_r,!0],[4,Zr]],!0],[[[6,Xr]]],[[[2,Rr,!0],[2,Or,!0],[2,Ir,!0]]]]),r(to,eo),r(e,to)}}function wo(e){return e<=0?'<span class="fshGreen cooldown">No active cooldown</span>':`<span class="fshMaroon cooldown">Cooldown until: ${function(e){const t=new Date(ne+1e3*e)
return`${$e(t.getHours())}:${$e(t.getMinutes())} ${$e(t.getDate())}/${ae[t.getMonth()]}/${t.getFullYear()}`}(e)}</span>`}function ko(e){n(e.current_hp,Kr),n(e.max_hp,Ur),n(e.kills,Qr),n(function(e){return ge(et(e.max_hp-e.current_hp,e.kills),2)}(e),Wr),n(function(e){return ge(100*e.kills/e.max_hp,2)}(e),Jr),A(function(e){return tt(e.kills,e.max_hp,e.current_hp)}(e),Zr),A(wo(e.cooldown),Xr)}function Co(e,t){return[[[2,Et(t.player.name)],[2,Et(t.kills.toString())],[2,Et(ge(100*t.kills/e.kills,2)+"%")]]]}function Lo(e){return e.realm&&e.creature.base_id===ao&&e.realm===Pr}function Do(e){const t=e.find(Lo)
t&&(ko(t),function(e){if(ho(),!e.contributors)return
const t=e.contributors.map(o(Co,e))
jr(eo,t)}(t))}function Mo(t){return e.showTitanInfo&&he(t)&&t.some(vo)}function Ao(e,t){(function(e){return e.s&&he(e.r)})(t)&&(Do(t.r),Mo(GameData.realm().dynamic)?no=window.setTimeout(e,3e4):go())}function Vo(){Gr().then(o(Ao,Vo))}function So(e){no&&(window.clearTimeout(no),no=null),Mo(e)?(yo(),Vo()):go()}function Bo(e){var t
e.dynamic&&(t=e.name,Pr=t,So(e.dynamic))}function Ho(e,t){(function(e){return e.realm&&e.realm.name})(t)&&Bo(t.realm)}function $o(e){const t=e.response.response,a=e.response.msg
let n
if(0!==t){const e=a.indexOf("<")
n=-1!==e?a.substring(0,e):a}else n=`You purchased ${e.response.data.name} for ${Ce(e.response.data.cost)} gold.`
i(co,n+"<br>")}function No(){GameData.doAction(14,3,{id:ro.id,item_id:ro.itemId},0),io.close()}function Go(){const e=ke(uo.value)
if(!e)return
const t=[]
for(let a=1;a<e;a+=1)t.push(fr({a:14,d:0,id:ro.id,item_id:ro.itemId}).then($o))
ze(t,No)}function xo(){so?n("",co):(so=t({className:"fshClear",textContent:"Select how many to quick-buy:"}),uo=ye({id:"buyAmount",className:"fshNumberInput",min:1,max:99,value:1,type:"number"}),r(so,uo),lo=Ne({textContent:"Quick-buy"}),s(lo,Go),r(so,lo),co=t(),r(so,co),r(oo,so))}function To(e,t){ro=t,oo=oo||a("shopDialogConfirm"),oo&&(io=io||$(oo).data("hcsWorldDialogShopConfirm"),io&&xo())}function Eo(e){fo[e.name]?fo[e.name].seen&&(fo[e.name].seen+=1):(fo[e.name]={seen:1},function(e,t){t.creature_class=e.creature_class,t.image_id=e.image_id,t.level=Number(e.level),t.type=e.type}(e,fo[e.name]))}function jo(e,t,a){return t?e(t,a):a}function Po(e,t){const a=e||{}
return a.min=jo(Math.min,a.min,t),a.max=jo(Math.max,a.max,t),a}const Fo=["attack","armor","damage","defense","hp"]
function Oo(e,t,a){const n=Po(t[a],Number(e[a]));(function(e,t){return!e||e.min!==t.min||e.max!==t.max})(t[a],n)&&(t[a]=n)}function Ro(e,t){e[t.name]=Po(e[t.name],Number(t.value))}function Io(e){fo||(fo={}),Eo(e),function(e,t){Fo.forEach(o(Oo,e,t))}(e,fo[e.name]),function(e,t){(function(e){return e.enhancements&&e.enhancements.length>0})(e)&&(t.enhancements=t.enhancements||{},e.enhancements.forEach(o(Ro,t.enhancements)))}(e,fo[e.name]),Se("fsh_monsterLog",fo)}function _o(e){fo=e||{}}const qo=[]
function Yo(t){var a
xa(t)||(ee("NewMap","MonsterLog"),a=t.response.data,e.showMonsterLog&&Io(a))}function zo(e,t){return e.id===t.id}function Ko(e,t){6!==e.type||function(e){if(qo.find(o(zo,e.data)))return!0
qo.push(e.data)}(e)||br(e.data.id,t).then(Yo)}function Uo(){e.showMonsterLog&&GameData.actions().forEach(Ko)}function Qo(e){return Ye(q({subcmd:"groups"},e))}function Wo(e){return function(e){return Qo({subcmd2:"viewstats",group_id:e})}(e)}function Jo(){return Qo({subcmd2:"view"})}function Zo(e){return e.numberOfCreatureHitsTillDead-e.numberOfHitsRequired<=1?", dies on miss":", survives a miss"}const Xo=[[e=>"-"===e.playerHits&&"-"===e.creatureHits,()=>"Unresolved"],[e=>"-"===e.playerHits,()=>"Player dies"],[e=>1===e.playerHits,e=>"Player 1 hits"+Zo(e)],[e=>e.playerHits>1,e=>"Player > 1 hits"+Zo(e)]]
function ei(e,t){return t[0](e)}function ti(e){e.playerHits=function(e){return"-"===e.numberOfCreatureHitsTillDead?e.numberOfHitsRequired:function(e){return"-"===e.numberOfHitsRequired||e.numberOfHitsRequired>e.numberOfCreatureHitsTillDead}(e)?"-":e.numberOfHitsRequired}(e),e.creatureHits=function(e){return"-"===e.numberOfHitsRequired?e.numberOfCreatureHitsTillDead:function(e){return"-"===e.numberOfCreatureHitsTillDead||e.numberOfCreatureHitsTillDead>e.numberOfHitsRequired}(e)?"-":e.numberOfCreatureHitsTillDead}(e),e.fightStatus=function(e){const t=Xo.find(o(ei,e))
return t?t[1](e):"Unknown"}(e)}function ai(e){e.creatureHitByHowMuch>=0?function(e){const t=e.generalVariable*e.creature.damage
t<e.overallArmorValue?e.numberOfCreatureHitsTillDead=e.overallHPValue:e.numberOfCreatureHitsTillDead=Math.ceil(e.overallHPValue/(t-e.overallArmorValue))}(e):e.numberOfCreatureHitsTillDead="-"}function ni(e){!function(e){const t=function(e){return e.callback.groupExists?e.callback.groupArmorValue:e.player.armorValue}(e)
e.overallArmorValue=t+Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}(e),function(e){e.player.sanctuaryLevel>0&&(e.extraNotes+=`Sanc Bonus Armor = ${Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}<br>`)}(e),function(e){e.terrorizeEffect=Math.floor(e.creature.damage*e.player.terrorizeLevel*.001)}(e),function(e){e.player.terrorizeLevel>0&&(e.extraNotes+=`Terrorize Creature Damage Effect = ${-1*e.terrorizeEffect}<br>`)}(e),e.creature.damage-=e.terrorizeEffect,function(e){e.creatureDamageDone=Math.ceil(e.generalVariable*e.creature.damage-e.overallArmorValue+e.overallHPValue)}(e),ai(e)}function ri(e){const t=function(e){return e.callback.groupExists?e.callback.groupAttackValue:e.player.attackValue}(e)
e.player.darkCurseLevel>0&&(e.extraNotes+=`DC Bonus Attack = ${Math.floor(e.creature.defense*e.player.darkCurseLevel*.002)}<br>`),e.nightmareVisageAttackMovedToDefense=Math.floor((t+e.counterAttackBonusAttack)*e.player.nightmareVisageLevel*.0025),e.player.nightmareVisageLevel>0&&(e.extraNotes+=`NMV Attack moved to Defense = ${e.nightmareVisageAttackMovedToDefense}<br>`),e.overallAttackValue=t+e.counterAttackBonusAttack-e.nightmareVisageAttackMovedToDefense,e.hitByHowMuch=function(e){const t=e.creature.defense-e.creature.defense*e.player.darkCurseLevel*.002
return 3===e.combatEvaluatorBias?e.overallAttackValue-Math.ceil(t)-50:e.overallAttackValue-Math.ceil(e.attackVariable*t)}(e)}function oi(e){e.lowestCALevelToStillHit=Math.max(Math.ceil((e.counterAttackBonusAttack-e.hitByHowMuch+1)/e.player.attackValue/.0025),0),e.lowestCALevelToStillKill=Math.max(Math.ceil((e.counterAttackBonusDamage-e.damageDone+1)/e.player.damageValue/.0025),0)}function ii(e){oi(e),e.lowestFeasibleCALevel=Math.max(e.lowestCALevelToStillHit,e.lowestCALevelToStillKill),e.extraNotes+=`Lowest CA to still 1-hit this creature = ${e.lowestFeasibleCALevel}<br>`,0!==e.lowestFeasibleCALevel&&function(e){e.extraAttackAtLowestFeasibleCALevel=Math.floor(.0025*e.player.attackValue*e.lowestFeasibleCALevel),e.extraDamageAtLowestFeasibleCALevel=Math.floor(.0025*e.player.damageValue*e.lowestFeasibleCALevel),e.extraNotes+=`Extra CA Att/Dam at this lowered CA level = ${e.extraAttackAtLowestFeasibleCALevel} / ${e.extraDamageAtLowestFeasibleCALevel}<br>`}(e),e.extraStaminaPerHitAtLowestFeasibleCALevel=function(e){return e.player.counterAttackLevel>0?Math.ceil(.0025*(1+e.player.doublerLevel/50)*e.lowestFeasibleCALevel):0}(e),e.extraStaminaPerHitAtLowestFeasibleCALevel<e.extraStaminaPerHit?e.extraNotes+=`Extra Stam Used at this lowered CA level = ${e.extraStaminaPerHitAtLowestFeasibleCALevel}<br>`:e.extraNotes+="No reduction of stam used at the lower CA level<br>"}function si(e){(function(e){return e.player.counterAttackLevel>0&&1===e.numberOfHitsRequired})(e)&&ii(e),function(e){return"-"===e.numberOfHitsRequired||1!==e.numberOfHitsRequired}(e)&&function(e){oi(e),function(e){e.lowestCALevelToStillHit>175?e.extraNotes+="Even with CA175 you cannot hit this creature<br>":0!==e.lowestCALevelToStillHit&&(e.extraNotes+=`You need a minimum of CA${e.lowestCALevelToStillHit} to hit this creature<br>`)}(e),function(e){e.lowestCALevelToStillKill>175?e.extraNotes+="Even with CA175 you cannot 1-hit kill this creature<br>":0!==e.lowestCALevelToStillKill&&(e.extraNotes+=`You need a minimum of CA${e.lowestCALevelToStillKill} to 1-hit kill this creature<br>`)}(e)}(e)}function ui(e){!function(e){const t=function(e){return e.callback.groupExists?e.callback.groupHPValue:e.player.hpValue}(e),{fortitudeLevel:a}=e.player
e.fortitudeExtraHPs=Math.floor(t*a*.001),a>0&&(e.extraNotes+=`Fortitude Bonus HP = ${e.fortitudeExtraHPs}<br>`),e.overallHPValue=t+e.fortitudeExtraHPs}(e),function(e){const{chiStrikeLevel:t}=e.player
e.chiStrikeExtraDamage=Math.floor(e.overallHPValue*t*.001),t>0&&(e.extraNotes+=`Chi Strike Bonus Damage = ${e.chiStrikeExtraDamage}<br>`)}(e)
const t=function(e){return e.callback.groupExists?e.callback.groupDamageValue:e.player.damageValue}(e)
if(e.overallDamageValue=t+e.deathDealerBonusDamage+e.counterAttackBonusDamage+e.holyFlameBonusDamage+e.chiStrikeExtraDamage,e.damageDone=Math.floor(e.overallDamageValue-(e.generalVariable*e.creature.armor+e.hpVariable*e.creature.hp)),e.hitByHowMuch>0){let t=1
e.overallDamageValue>=e.generalVariable*e.creature.armor&&(t=e.overallDamageValue-e.generalVariable*e.creature.armor),e.numberOfHitsRequired=Math.ceil(e.hpVariable*e.creature.hp/t)}else e.numberOfHitsRequired="-"}function li(e){return e.callback.groupExists?e.callback.groupDefenseValue:e.player.defenseValue}function ci(e){e.overallDefenseValue=li(e)+Math.floor(li(e)*e.player.constitutionLevel*.001)+e.nightmareVisageAttackMovedToDefense,function(e){e.player.constitutionLevel>0&&(e.extraNotes+=`Constitution Bonus Defense = ${Math.floor(li(e)*e.player.constitutionLevel*.001)}<br>`)}(e),function(e){e.player.flinchLevel>0&&(e.extraNotes+=`Flinch Bonus Attack Reduction = ${Math.floor(e.creature.attack*e.player.flinchLevel*.001)}<br>`)}(e),e.creatureHitByHowMuch=Math.floor(e.attackVariable*e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue),3===e.combatEvaluatorBias&&(e.creatureHitByHowMuch=Math.floor(e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue-50))}function fi(e){e.extraNotes="",function(e){e.player.superEliteSlayerLevel>0&&(e.extraNotes+=`SES Stat Reduction Multiplier = ${e.player.superEliteSlayerMultiplier}<br>`)}(e),function(e){e.holyFlameBonusDamage=0,"Undead"===e.creature.class&&(e.holyFlameBonusDamage=Math.max(Math.floor((e.player.damageValue-e.creature.armor)*e.player.holyFlameLevel*.002),0),e.player.holyFlameLevel>0&&(e.extraNotes+=`HF Bonus Damage = ${e.holyFlameBonusDamage}<br>`))}(e),function(e){e.deathDealerBonusDamage=Math.floor(e.player.damageValue*(Math.min(.01*Math.floor(e.player.killStreakValue/5)*e.player.deathDealerLevel,20)/100))}(e),function(e){e.counterAttackBonusAttack=Math.floor(.0025*e.player.attackValue*e.player.counterAttackLevel),e.counterAttackBonusDamage=Math.floor(.0025*e.player.damageValue*e.player.counterAttackLevel)}(e),function(e){e.extraStaminaPerHit=0,e.player.counterAttackLevel>0&&(e.extraStaminaPerHit=Math.ceil(.0025*(1+e.player.doublerLevel/50)*e.player.counterAttackLevel))}(e),function(e){e.player.deathDealerLevel>0&&(e.extraNotes+=`DD Bonus Damage = ${e.deathDealerBonusDamage}<br>`)}(e),function(e){e.player.counterAttackLevel>0&&(e.extraNotes+=`CA Bonus Attack/Damage = ${e.counterAttackBonusAttack} / ${e.counterAttackBonusDamage}<br>CA Extra Stam Used = ${e.extraStaminaPerHit}<br>`)}(e)}let di,mi,hi,pi,bi,gi,vi,yi,wi,ki
function Ci(){return sa(mi)?"Remove from do not kill list":"Add to the do not kill list"}function Li(){n(Ci(),hi)}function Di(){const t=e.doNotKillList.indexOf(mi);-1===t?e.doNotKillList.push(mi):e.doNotKillList.splice(t,1),Li(),d("doNotKillList",e.doNotKillList.join()),la()}function Mi(){hi?Li():function(){hi=Ne({className:"fshBl",textContent:Ci(),type:"button"})
const e=t({className:"description",innerHTML:'<span class="ui-helper-hidden-accessible"><input type="text"></span>'})
r(e,hi),r(di,e),s(hi,Di)}()}function Ai(e,t){!function(e){if(!di){const t=z("body",e)
1===t.length&&([di]=t)}}(t),di&&(mi=e.trim(),Mi())}function Vi(){gi||(bi||(bi=t(),r(pi,bi),r(pi,t({innerHTML:'<span class="fshFooter">*Does include CA, DD, HF, DC, Flinch, Super Elite Slayer, NMV, Sanctuary, Constitution, Fortitude, Chi Strike and Terrorize (if active) and allow for randomness (1.1053). Constitution, NMV, Fortitude and Chi Strike apply to group stats.</span>'}))),gi=t(),r(bi,gi))}function Si(e){Vi(),A(e,gi)}function Bi(e){vi||(Vi(),vi=t(),r(bi,vi)),A(e,vi)}function Hi(e,t){const a={name:e.name,class:e.creature_class,attack:Number(e.attack),defense:Number(e.defense),armor:Number(e.armor),damage:Number(e.damage),hp:Number(e.hp)}
return function(e,t,a){3===a&&(t.attack-=Math.ceil(t.attack*e),t.defense-=Math.ceil(t.defense*e),t.armor-=Math.ceil(t.armor*e),t.damage-=Math.ceil(t.damage*e),t.hp-=Math.ceil(t.hp*e))}(t,a,e.type),a}function $i(t,a,n){const r={}
r.callback=n,r.player=Nn(a),function(t){t.combatEvaluatorBias=e.combatEvaluatorBias,t.attackVariable=1.1053,t.generalVariable=e.generalVariable,t.hpVariable=e.hpVariable}(r),r.creature=Hi(t.response.data,r.player.superEliteSlayerMultiplier),function(e){fi(e),ri(e),ui(e),ci(e),ni(e),ti(e),si(e)}(r),r.evaluatorHTML=function(e){return`<table width="100%"><tbody>${function(e){return`<tr><td bgcolor="#CD9E4B" colspan="4" align="center">${function(e){return e.callback.groupExists?"Group ":""}(e)}Combat Evaluation</td></tr>`}(e)}${function(e){return`<tr><td align="right"><span style="color:#333333">Will I hit it? </td><td align="left">${function(e){return e.hitByHowMuch>0?"Yes":"No"}(e)}</td><td align="right"><span style="color:#333333">Extra Attack: </td><td align="left">( ${e.hitByHowMuch} )</td></tr>`}(e)}${function(e){return`<tr><td align="right"><span style="color:#333333"># Hits to kill it? </td><td align="left">${e.numberOfHitsRequired}</td><td align="right"><span style="color:#333333">Extra Damage: </td><td align="left">( ${e.damageDone} )</td></tr>`}(e)}${function(e){return`<tr><td align="right"><span style="color:#333333">Will I be hit? </td><td align="left">${function(e){return e.creatureHitByHowMuch>=0?"Yes":"No"}(e)}</td><td align="right"><span style="color:#333333">Extra Defense: </td><td align="left">( ${-1*e.creatureHitByHowMuch} )</td></tr>`}(e)}${function(e){return`<tr><td align="right"><span style="color:#333333"># Hits to kill me? </td><td align="left">${e.numberOfCreatureHitsTillDead}</td><td align="right"><span style="color:#333333">Extra Armor + HP: </td><td align="left">( ${-1*e.creatureDamageDone} )</td></tr>`}(e)}${function(e){return`<tr><td align="right"><span style="color:#333333"># Player Hits? </td><td align="left">${e.playerHits}</td><td align="right"><span style="color:#333333"># Creature Hits? </td><td align="left">${e.creatureHits}</td></tr>`}(e)}${function(e){return`<tr><td align="right"><span style="color:#333333">Fight Status: </span></td><td align="left" colspan="3"><span>${e.fightStatus}</span></td></tr>`}(e)}${function(e){return`<tr><td align="right"><span style="color:#333333">Notes: </span></td><td align="left" colspan="3"><span style="font-size:x-small;">${e.extraNotes}</span></td></tr>`}(e)}</tbody></table>`}(r),n.groupExists?Bi(r.evaluatorHTML):Si(r.evaluatorHTML)}function Ni(e){return e.members[0].name===ve()}function Gi(e){if(he(e.r))return e.r.find(Ni).id}function xi(e,t,a){if(!a.r||!a.r.attributes)return
const n=a.r.attributes
$i(e,t,{groupExists:!0,groupAttackValue:n[0].value,groupDefenseValue:n[1].value,groupArmorValue:n[2].value,groupDamageValue:n[3].value,groupHPValue:n[4].value})}function Ti(e,t,a){a&&Wo(a).then(o(xi,e,t))}function Ei(e,t){e.player.hasGroup&&function(e,t){Jo().then(Gi).then(o(Ti,e,t))}(e,t),$i(e,t,{groupExists:!1})}function ji(e,t){pi||(pi=a("dialog-viewcreature")),pi&&(Si(""),Bi(""),function(e){return e.response&&e.response.data}(t)&&(Ai(t.response.data.name,pi),qe(!0).then(o(Ei,t))))}function Pi(){const t=[,[e.buffs,e.buffsName],[e.buffs2,e.buffs2Name],[e.buffs3,e.buffs3Name]][e.enabledHuntingMode]
he(t)&&([yi,wi]=t)}function Fi(t){"enabledHuntingMode"===t.target.name&&(e.enabledHuntingMode=t.target.value,d("enabledHuntingMode",e.enabledHuntingMode),Pi(),GameData.fetch(u))}function Oi(e){const t=z("verbs",e)
1===t.length&&Te(t[0])}function Ri(){if(!ki)return
const e=a("actionList")
je("player",e).forEach(Oi)}const Ii={hideSubLvlCreature:function(){e.hideSubLvlCreature=!e.hideSubLvlCreature,d("hideSubLvlCreature",e.hideSubLvlCreature),GameData.fetch(ue)},hidePlayerActions:function(){ki=!ki,d("hidePlayerActions",ki),GameData.fetch(ue)},showCreatureInfo:function(){e.showCreatureInfo=!e.showCreatureInfo,d("showCreatureInfo",e.showCreatureInfo)},showHuntingBuffs:function(){e.showBuffs=!e.showBuffs,d("showHuntingBuffs",e.showBuffs),GameData.fetch(u)},showMonsterLog:function(){e.showMonsterLog=!e.showMonsterLog,d("showMonsterLog",e.showMonsterLog)},showTitanInfo:function(){e.showTitanInfo=!e.showTitanInfo,d("showTitanInfo",e.showTitanInfo),So(GameData.realm().dynamic)},showBuffInfo:function(){e.showBuffInfo=!e.showBuffInfo,d("showBuffInfo",e.showBuffInfo),Jt()}}
function _i(e){const t=Ii[e.target.name]
b(t)&&(e.target.blur(),t(e))}function qi(){const e=t({className:"fshCenter fshFten"}),n=t({id:"fshWorldPrefs",innerHTML:`${Be("showCreatureInfo")}&nbsp;&nbsp;${Be("showMonsterLog")}&nbsp;&nbsp;${Be("showTitanInfo")}&nbsp;&nbsp;${Be("showBuffInfo")}<br>${Be("hideSubLvlCreature")}&nbsp;&nbsp;${Be("hidePlayerActions")}&nbsp;&nbsp;${rt()}`})
s(n,_i),k(n,"change",Fi),r(e,n)
const o=t()
r(e,o)
const i=a("worldContainerBelow").children[0]
return De(e,i),o}function Yi(e,t){return e[t.name]=!0,e}function zi(e,t,a){return e[a.trim()]||t.push(a),t}function Ki(e){A("",e)}function Ui(e,t){const a=t.b.reduce(Yi,{}),n=yi.reduce(o(zi,a),[])
n.length>0?function(e,t){A(`You are missing some ${wi} hunting buffs<br>(${t.join(", ")})`,e)}(e,n):Ki(e)}function Qi(t,a,n){yi&&function(t,a,n){e.showBuffs?Ui(t,n):Ki(t)}(t,0,n)}const Wi=[{generalVariable:1.1053,hpVariable:1.1},{generalVariable:1.1,hpVariable:1.053},{generalVariable:1.053,hpVariable:1},{generalVariable:1.1053,hpVariable:1}]
function Ji(){var t
e.combatEvaluatorBias=m("combatEvaluatorBias"),e.generalVariable=(t=e.combatEvaluatorBias,Wi[t]?Wi[t].generalVariable:1.1053),e.hpVariable=function(e){return Wi[e]?Wi[e].hpVariable:1.1}(e.combatEvaluatorBias)}function Zi(e,t){return 6!==t.type||(0!==t.data.creature_type||t.data.level>=e)}function Xi(e){const t=le(e)
return function(e){return!e||!e.actions||0===e.actions.length}(t)?e:(t.actions=t.actions.filter(o(Zi,function(e){return e.realm&&e.realm.minlevel||GameData.realm().minlevel}(t))),JSON.stringify(t))}function es(t,a){e.hideSubLvlCreature&&function(e){return e.data&&e.data.d&&Ze(e.data.d,ue)}(a)&&(t.dataFilter=Xi)}function ts(t){e[t[0]]=Ee(t[1])}function as(t){e[t]=Ee(t)}function ns(){[["buffs","huntingBuffs"],["buffs2","huntingBuffs2"],["buffs3","huntingBuffs3"]].forEach(ts),["doNotKillList"].forEach(as)}function rs(t){e[t[0]]=m(t[1])}function os(t){e[t]=m(t)}function is(){[["buffsName","huntingBuffsName"],["buffs2Name","huntingBuffs2Name"],["buffs3Name","huntingBuffs3Name"],["showBuffs","showHuntingBuffs"]].forEach(rs),["enabledHuntingMode","hideSubLvlCreature","showTitanInfo","showBuffInfo","showMonsterLog","showCreatureInfo"].forEach(os)}function ss(e){$(`#actionList li.creature-${e.toString()} a.create-group`).hide()}const us=["hideChampionsGroup","hideElitesGroup","hideSEGroup","hideTitanGroup","hideLegendaryGroup"]
function ls(e,t){var a
m(e)&&(a=t+1,$.subscribe(v,o(ss,a)),ss(t+1))}function cs(e,t){"ACT_REPAIR"===t&&GameData.fetch(de+u+me+ue)}function fs(e){C(e.target)}const ds=[function(){Ji(),ns(),is()
const t=qi()
$.ajaxPrefilter("JSON",es),e.hideSubLvlCreature&&GameData.fetch(ue),function(t){Pi()
const a=o(Qi,t)
$.subscribe(l,a),e.showBuffs&&window.initialGameData&&a(null,{b:window.initialGameData.player.buffs})}(t),ki=m("hidePlayerActions"),$.subscribe(v,Ri),Ri()},function(){F(),O&&cr()},function(){$.subscribe(se,ji)},function(){us.forEach(ls)},function(){m("enableCreatureColoring")&&r(document.body,Ge("#actionList .creature-1 {color: green;}\n#actionList .creature-2 {color: yellow;}\n#actionList .creature-3 {color: red;}"))},function(){$.subscribe(v,la),la(),function(){const e=GameData.doAction
GameData.doAction=da(e)}()},function(){Ve("fsh_monsterLog").then(_o),$.subscribe("-1-success.action-response 4-success.action-response 5-success.action-response 25-success.action-response",Uo),Uo()},function(){$.subscribe(fe,cs)},function(){m("keepLogs")&&Ve("fsh_combatLog").then(ia)},function(){window.initialGameData&&Ho(0,window.initialGameData),$.subscribe(`${re} ${oe}`,Ho)},function(){$.subscribe(ie,To)},function(){$.subscribe(T,sr)},function(){$("#messageCenter").worldMessageCenter({offset:"0 60"})},function(){C("#mapTooltip")},function(){$a(),$.subscribe(y,Na),$.subscribe(w,Ga)},function(){Jt(),$.subscribe(`${l} ${c}`,Jt),$.subscribe(f,Zt)},function(){s(a("buffList"),fs)},function(){k(a("actionList"),"mouseover",Nr)}]
export default function(){ce(ds)}
//# sourceMappingURL=newMap-27e6fad8.js.map
