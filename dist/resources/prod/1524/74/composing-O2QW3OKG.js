import{a as k,b as O}from"./chunk-DHCRCT6S.js";import{a as S}from"./chunk-T75FYQWQ.js";import{a as g}from"./chunk-ZSRUSJD4.js";import{a as _,b as J}from"./chunk-DNDM2JF5.js";import{a as R}from"./chunk-QEJBYH3I.js";import{a as h}from"./chunk-RYPKNRJL.js";import{a as T}from"./chunk-ILQN7UOP.js";import"./chunk-CCLZNKSK.js";import{a as c}from"./chunk-2R5YWF5Y.js";import{a as M}from"./chunk-KDWZJUZA.js";import{a as C}from"./chunk-W5GFA5ST.js";import"./chunk-CGMJZDEW.js";import{a as Q}from"./chunk-DVLPAFXM.js";import{a as $}from"./chunk-RYE3L7GQ.js";import{a as b}from"./chunk-J5XNY3JU.js";import"./chunk-IQW2ORO4.js";import"./chunk-OOBHF62J.js";import{a as w}from"./chunk-VBWDODYG.js";import{a as F}from"./chunk-V3IBFSBQ.js";import"./chunk-PSXSBL4N.js";import{a as f}from"./chunk-QIL4FZV2.js";import{a as s}from"./chunk-IZXJJTGC.js";import"./chunk-V6NNO7H4.js";import"./chunk-27EEPRQG.js";import{a as P}from"./chunk-WTFHXAG5.js";import{a as V}from"./chunk-7L7VBHFN.js";import"./chunk-7P2FG6TX.js";import{a as L}from"./chunk-B4BQ57SA.js";import"./chunk-LXEIN7K6.js";import{a}from"./chunk-7FSBX4F6.js";import"./chunk-FOD25WME.js";import"./chunk-RSDTLHOA.js";import{b as i}from"./chunk-32VOUESG.js";import{a as m}from"./chunk-7A7KFFCI.js";import{a as A}from"./chunk-WIXXQZGK.js";import"./chunk-VAF5SHD2.js";import"./chunk-7OIIEMPN.js";import"./chunk-G6KH6V7U.js";import{a as n}from"./chunk-JTZMGYZZ.js";import"./chunk-IYLDI6QO.js";import{a as H}from"./chunk-ZSG7IXEN.js";import"./chunk-MC5PPM6O.js";import"./chunk-3HBYM6UL.js";import"./chunk-NYKMXDP7.js";import{a as u}from"./chunk-QZ2N7BU4.js";import{a as d}from"./chunk-2PPLUYZS.js";import{b as I}from"./chunk-CJBVZNBW.js";import"./chunk-LBZNNC2Y.js";import"./chunk-6VTPYDCU.js";import{a as j}from"./chunk-7SWYICSP.js";import"./chunk-L67WY5JB.js";import{b as B,pa as l,qa as q}from"./chunk-M7EFODKE.js";import{a as N}from"./chunk-N5EIINNY.js";function v(e){return V({cache:!1,dataType:"json",data:{cmd:"composing",subcmd:"createajax",template_id:e,fshrnd:O()}})}function G(){return`url(${B}composing/${k(1,11)}_${k(1,51)}.png)`}function K(e,t){m("",e.children[0]),e.children[0].classList.add("fshPot"),e.children[0].style.backgroundImage=G(),m(`Creating '<span class="fshBold">${t}</span>' Potion`,e.children[2]),m("",e.children[3])}function U(){s('[id|="composing-template"]:not(#composing-template-multi)').length===0&&a(l,!1)}function W(e){let t=e.parentNode;!t||(m('<div class="fshScs">Success</div>',t),K(t.previousElementSibling.previousElementSibling,e[e.selectedIndex].text),U())}function X(e,t){let o=e.parentNode;!o||!t||(t.error?m(`<div class="fshScs">${t.error}</div>`,o):W(e))}function Y(e){v(e.value).then(n(X,e))}function p(e,t){t.id=`proc-${t.id}`,m("",e),e.classList.add("fshSpinner","fshSpinner12","fshComposingSpinner"),Y(t),_("quickcreate")}function z(e,t){e.classList.add(`left-${t.toString()}`)}function Z(e){let t=s(".quickCreate .sendLink");z(e,t.length)}function ee(e,t){c("composing","FastComposeButton");let o=s('[id|="composing-template"]:not(#composing-template-multi)');if(!(o.length<e.value))for(let r=0;r<e.value;r+=1)o[r].value=t,p(o[r].nextElementSibling.nextElementSibling,o[r])}function te(e){let t=e.target,{templateId:o}=t.dataset;o&&ee(t,o)}function oe(e,t){return h({className:"awesome orange",dataset:{templateId:t},type:"button",value:e})}function re(e,t,o,r){return r===0&&Q(e[1],t.insertCell(-1)),b(t.insertCell(-1),oe((r+1).toString(),e[0])),t}function ne(e,t,o,r){return e.reduce(n(re,r),o.insertRow(-1)),o}function ie(e,t,o){let r=R({id:"fshFastCompose"});return z(r,o),e.reduce(n(ne,t,o),r)}function me(e){return[e.value,e.text]}function se(e,t,o){let r=f("#composing-template-multi option").map(me),x=ie(r,t,o);b(e,x),d(i,te),J("quickcreate",n(Z,x))}function ae(e){c("composing","FastCompose"),C(e,"<br>");let t=u("composing-potion-time",document),o=t.filter(F("ETA: n/a")).length;o>0?se(e,t,o):C(e,"No open slots!")}function y(){let e=w("#pCC div.centered");g(e.children[1],' | <label for="fast-compose"><span class="sendLink">Fast Compose</span></label>');let t=$({className:"centered"});S(t,e);let o=h({id:"fast-compose",type:"checkbox"});S(o,e),T(o,"change",n(ae,t))}var ce=/ETA:\s*(\d+)h\s*(\d+)m\s*(\d+)s/;function pe(e){let t=ce.exec(L(e));return t?(t[1]*3600+t[2]*60+Number(t[3]))*1e3+P:0}function D(e){a(l,e)}function E(){if(!N.enableComposingAlert)return;let e=u("composing-potion-time",document),t=Math.min(...e.map(pe));t===0?D(!0):(D(!1),a(q,t))}function le(){if(I("moveComposingButtons")){let e=A("composing-error-dialog").previousElementSibling;e.setAttribute("style","text-align: right; padding: 0 38px 0 0");let t=j("composing-level",i)[0].parentNode;M(e,t)}}function fe(e){g(e,'<span class="quickCreate">[<span class="sendLink">Quick Create</span>]</span>')}function ue(e){return e.tagName==="SPAN"&&e.className==="quickCreate"}function de(e){let t=e.previousElementSibling.previousElementSibling;t&&t.value!=="none"&&(p(e,t),c("composing","QuickCreate"))}function ge(e){let t=e.target.parentNode;ue(t)&&de(t)}function Ce(){E(),f("input[id^=create-]:not(#create-multi)",i).forEach(fe),d(i,ge),le(),y()}function be(){H()&&i&&Ce()}export{be as default};
//# sourceMappingURL=composing-O2QW3OKG.js.map
