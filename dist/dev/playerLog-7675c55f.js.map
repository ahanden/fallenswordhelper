{"version":3,"file":"playerLog-7675c55f.js","sources":["../../src/modules/_dataAccess/daViewCombat.js","../../src/modules/app/combat/view.js","../../src/modules/logs/pvpSummary/combatCache.js","../../src/modules/ajax/combatView.js","../../src/modules/logs/pvpSummary/addPvpSummary.js","../../src/modules/logs/doBuffLink.js","../../src/modules/logs/doChat.js","../../src/modules/logs/processLadder.js","../../src/modules/logs/playerColour.js","../../src/modules/logs/addLogWidgets.js","../../src/modules/logs/viewCombat.js","../../src/modules/logs/playerLog.js"],"sourcesContent":null,"names":["daViewCombat","id","callApp","cmd","subcmd","combat_id","appViewCombat","combatCache","keepRecent","data","sevenDays","acc","combatId","logTime","currentCombatRecord","prepareCache","oneDay","nowSecs","lastCheck","keys","reduce","partial","set","cleanCache","checkCache","inSpecialsList","el","specials","check","specialHtml","i","label","JSON","stringify","getText","console","log","sendEvent","whatsMissing","json","html","querySelectorAll","createDocument","r","forEach","unknownSpecials","every","indexAjaxData","then","cacheCombat","aRow","s","parseDateAsTimestamp","getTextTrim","cells","result","stat","desc","color","addCommas","iWon","defender","playerId","winner","iDefended","attacker","iAttacked","highlightSpecials","params","parseCombat","combatSummary","setInnerHtml","xp_gain","gold_gain","gold_stolen","pvp_prestige_gain","pvp_rating_change","replaceLeadingText","msgCell","newHtml","replaceText","createSpan","innerHTML","replaceChild","firstChild","processCombatRow","test","includes","combatID","exec","createDiv","style","insertElement","processCombat","combatRowTests","messageType","calf","showPvPSummaryInLog","addPvpSummary","e","isCombatRow","thisNick","nick","buffObj","csvSplit","nicks","toLowerCase","getBuffId","buffList","find","doBuffLink","targetPlayerID","buffsSent","href","quickBuffHref","replace","map","join","messageExtras","playerName","messageHTML","firstPart","substring","indexOf","makeFirstPart","replyTo","buffName","enableChatParsing","substr","makeMsgReplyTo","tradeUrl","secureUrl","makeExtraPart","thirdPart","targetPlayerRE","match","getThirdPart","addAttackLinkToLog","attackplayerUrl","getAttackPart","makeFourthPart","length","makeLastPart","isChat","isGuildMate","extraPart","dateHTML","dateFirstPart","dateLastPart","doAddIgnore","reportIgnore","processLadder","isLadderReset","lastLadderReset","setValue","saveLastResetTime","listOfAllies","listOfEnemies","memberNamesAsStrings","setColour","col","classList","add","playerColor","colorPlayerName","playerElement","isEnemy","isAlly","getKeys","justUsername","obj","username","prepareAlliesEnemies","_allies","_enemies","addExtraStuff","dateExtraText","canIgnore","buffingPlayerID","playerIDRE","buffingPlayerName","children","extraText","hasPlayerLink","nodeName","doLogWidgetRow","doChat","doExtraStuff","processLogWidgetRow","getTitle","pvpId","getPvpId","viewCombat","openMsgDialog","evt","window","openQuickMsgDialog","target","getAttribute","foundLogTable","logTable","getCalfPrefs","messageHeader","rows","insertHtmlBeforeEnd","doMsgHeader","dataRows","processTableRows","$","on","addLogWidgetsOld","getValue","querySelector","addLogColoring","jQueryNotPresent","prm","myStats","get","currentGuildId","push","getMembrList","allthen","addLogWidgets"],"mappings":"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","sourceRoot":"https://localhost:9966"}