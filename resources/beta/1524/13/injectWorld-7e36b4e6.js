import{e,t,l as a,A as n,U as r,B as o,T as i,h as s,ab as u,v as l,i as c,o as f,ac as d,ad as h,ae as m,af as p,ag as b,a4 as g,G as v,ah as y,ai as w,aj as k,ak as C,D as L,al as D,am as M,an as V,ao as A,ap as B,P as S,f as H,aq as N,ar as G,as as x,at as T,au as E,C as P,n as F,av as R,a9 as O,aw as I,x as _,ax as j,aa as q,ay as Y,az as K,Q as z,w as U,R as Q,V as W,a as J,J as X,K as Z,aA as ee,aB as te,aC as ae,aD as ne,aE as re,aF as oe,aG as ie,a0 as se,aH as ue,aI as le,aJ as ce,aK as fe,aL as de,aM as he,aN as me,aO as pe,aP as be,aQ as ge,aR as ve,aS as ye,aT as we,aU as ke,aV as Ce,aW as Le,aX as De,aY as Me,aZ as Ve,j as Ae}from"./calfSystem-1e164202.js"
import{i as Be}from"./isArray-2e06f453.js"
import{n as Se}from"./numberIsNaN-caf9724d.js"
import{r as He,a as $e}from"./roundToString-f1763b9e.js"
import{c as Ne}from"./createInput-57c382fb.js"
import{i as Ge}from"./insertTextBeforeEnd-84a4b183.js"
import"./testRange-1e069fc3.js"
import{t as xe}from"./testQuant-d903f113.js"
import{c as Te}from"./createLabel-dfc46f16.js"
import"./createUl-477ed217.js"
import"./isChecked-a6837b63.js"
import{b as Ee}from"./simpleCheckbox-e560fb3f.js"
import{c as Pe}from"./createTable-82fabb58.js"
import{c as Fe}from"./createButton-85e0a2ef.js"
import{c as Re}from"./createStyle-96eea581.js"
import{a as Oe}from"./all-9d451f65.js"
import{a as Ie}from"./allthen-e12139d3.js"
import"./rnd-adbf5cc4.js"
import{f as _e}from"./fetchdata-f5fdffba.js"
import{e as je}from"./eventHandler5-d8226a6d.js"
import{h as qe}from"./hasClasses-9353c7a6.js"
import"./isSelected-bebd01b7.js"
import{g as Ye}from"./getMembrList-060d998b.js"
import{d as Ke,g as ze}from"./getGroupStats-e4e6ac84.js"
import"./groupViewStats-cbb9adf0.js"
import{g as Ue}from"./getMercStats-2a73ee0e.js"
import{b as Qe}from"./bitwiseAnd-c10d5731.js"
import{r as We}from"./reduceBuffArray-f7d9e1b5.js"
import{g as Je,a as Xe}from"./getTitanString-39b41c63.js"
import{d as Ze,q as et}from"./quickbuffSuccess-65977563.js"
import{a as tt}from"./huntingBuffs-28d8ea05.js"
let at,nt,rt,ot,it,st,ut,lt,ct
function ft(e){return e}function dt(o){if(function(t){return e.showBuffInfo&&t.some(ft)}(o))return function(){if(at)t(at,!1)
else{at=a({className:"fshActionBox",innerHTML:"<div></div><div></div><div></div><div></div><div></div><div></div>"})
const e=n("actionContainer")
r(at,e.children[2])}return at}()
at&&t(at,!0)}function ht(e,a){nt?t(nt,!1):function(e){nt=e.children[3],nt.className="fshBlue",o("CA ",nt),rt=i(),s(nt,rt),Ge(nt," active")}(e),o(a.level,rt)}function mt(e,a){a?ht(e,a):nt&&t(nt,!0)}function pt(e,a){ot?t(ot,!1):function(e){ot=e.children[4],ot.className="fshRed",o("Doubler ",ot),it=i(),s(ot,it),Ge(ot," active")}(e),o(a.level,it)}function bt(e,a){a?pt(e,a):ot&&t(ot,!0)}function gt(e,a,n){st?t(st,!1):function(e){st=e.children[2],o("Damage bonus: ",st),ut=i(),s(st,ut),Ge(st,"%")}(e),o(function(e,t){if(e){const a=Math.min(.01*Math.round(Math.floor(t/5)*Number(e.level)),20)
return He(a,2).toString()}return"0"}(a,Number(n)),ut)}function vt(e,a,n){a?gt(e,a,n):st&&t(st,!0)}function yt(e,t){o(u(e),t)}function wt(e,a){lt?t(lt,!1):function(e){lt=e.children[1],o("Kill Streak: ",lt),ct=i(),s(lt,ct)}(e),yt(a,ct)}function kt(e,a,n,r){a||n?wt(e,r):lt&&t(lt,!0)}function Ct(e,t){return t.name===e}function Lt(e){const{buffs:t}=GameData.player()
if(t)return t.find(l(Ct,e))}const Dt=["red","orange","yellow"]
let Mt,Vt
function At(e){et(e)&&GameData.fetch(h)}function Bt(){Lt("Summon Shield Imp")||Ze([d()],[55]).then(At)}const St=["imp-0","imp-1","imp-1"]
function Ht(e,a){Mt?t(Mt,!1):function(e){Mt=e.children[0],o("Shield Imps Remaining: ",Mt),Vt=i(),s(Mt,Vt),c(Mt,"&nbsp;")
const t=i({className:"xSmallLink",textContent:"Recast"})
s(Mt,t),f(t,Bt)}(e)
const n=function(e){return e?Number(e.stack):0}(a)
Mt.className=function(e){return St[e]||"fshGreen"}(n),o(n,Vt)}function $t(e,a,n){a||n?Ht(e,a):Mt&&t(Mt,!0)}function Nt(e){return 0===e.type}function Gt(e){return i({textContent:e})}let xt,Tt,Et,Pt,Ft,Rt,Ot,It,_t,jt
function qt(e,a){xt?t(xt,!1):function(e,t){xt=e.children[5],o("Teleport Cooldown: ",xt),Tt=Gt(t.toString()),s(xt,Tt)}(e,a)}function Yt(){const e=Math.max(Math.ceil((Et-Date.now())/1e3),0)
o(e,Tt),e>0&&setTimeout(Yt,500)}function Kt(e,a){a?qt(e,a):xt&&t(xt,!0)}function zt(){Pt=Lt("Death Dealer"),Ft=Lt("Doubler"),Rt=Lt("Counter Attack"),Ot=Lt("Summon Shield Imp"),It=function(){const e=GameData.player().teleportCooldown
return e>1&&e}(),_t=function(){const{dynamic:e}=GameData.realm()
return Be(e)&&e.some(Nt)}(),jt=GameData.player().killStreak}function Ut(){!function(){const e=$("#actionlist-shield-imp")
1===e.length&&e.css("background-color",Dt[e.text()]||"#ad8043")}(),zt()
const e=dt([Pt,Ft,Rt,Ot,It,_t])
e&&($t(e,Ot,Pt),kt(e,Pt,_t,jt),vt(e,Pt,jt),mt(e,Rt),bt(e,Ft),Kt(e,It))}function Qt(e,t){var a
a=t.player.teleportCooldown,Tt&&(Et=Date.now()+1e3*a,Yt())}const Wt=["Breaker","Protection","Master Thief","Protect Gold","Disarm","Duelist","Thievery","Master Blacksmith","Master Crafter","Fury Caster","Master Inventor","Sustain"]
let Jt,Xt=[]
function Zt(e){54!==e.id&&26!==e.id||(Jt.player.buffs[e.id]=parseInt(e.level,10))}function ea(e){-1===Wt.indexOf(e.name)&&(Jt.player.enhancements[e.name]=e.value)}function ta(e,t){Jt={},Jt.combat=t.response.data,Jt.combat.inventory_id&&(Jt.combat.drop=Jt.combat.item.id),Jt.player={},Jt.player.buffs={},Jt.player.enhancements={},function(e){e.player.buffs&&e.player.buffs.forEach(Zt)}(t),function(e){e.player.enhancements&&e.player.enhancements.forEach(ea)}(t),Jt.time=t.time,Xt.push(Jt),k("fsh_combatLog",Xt)}function aa(e,t){0===t.response.response&&ta(0,t)}function na(e){e&&(Xt=e),$.subscribe(w,aa)}function ra(t){return e.doNotKillList.includes(t.trim())}function oa(e){e.classList.toggle("fshBlue",ra(L(e)))}function ia(){const e=n("actionList")
C("creature",e).forEach(oa)}function sa(e){const t=GameData.actions()[e]
if(t)return function(e,t){if(ra(e))return n("actionList").children[t].children[0].children[1].classList.remove("loading"),!0}(t.data.name,e)}const ua={2:function(e){return function(t,a,n,r){sa(n.passback)||e(t,a,n,r)}}}
function la(e){return function(t,a,n,r){const o=ua[t];(function(e){return e&&D(e)})(o)&&function(e){return M(e)||0===e}(r)?o(e)(t,a,n,r):e(t,a,n,r)}}function ca(){window.GameController&&GameController.Realm&&!GameController.Realm.footprintTileList&&(GameController.Realm.footprintTileList=[])}function fa(e,t,a){return Te({className:"fshCurveEle fshCurveLbl fshPoint tip-static "+e,dataset:{tipped:t},htmlFor:a})}function da(e){const t=a({className:"fshToggle"}),n=Ne({checked:e.prefVal,id:e.checkId,type:"checkbox"})
s(t,n)
const r=fa(e.onClass,e.onTip,e.checkId)
s(t,r)
const o=fa(e.offClass,e.offTip,e.checkId)
return s(t,o),s(e.worldName,t),n}let ha,ma,pa,ba,ga,va,ya,wa,ka
function Ca(e){return e?e.toString():"?"}function La(e){const t=a({className:"fshFsty"})
s(t,function(){const e=a({textContent:"Min Lvl: "})
return ma=Gt(Ca(GameData.realm().minlevel)),s(e,ma),e}()),s(t,function(){const e=a({textContent:"Your Lvl: "})
return pa=Gt(Ca(GameData.player().level)),s(e,pa),e}()),s(e,t)}function Da(e,t,a){const n=Fe({className:"fshCurveEle fshCurveBtn fshPoint tip-static "+e,dataset:{tipped:t}})
return s(a,n),n}function Ma(){var t
La(t=ha),ba=Da("fshFormGroup","Quick Create Attack Group",t),ga=Da("fshQuickBuff","Open Quick Buff Popup",t),va=Da("fshRealmMap","Open Realm Map",t),ya=Da("fshTempleOne","Search map in Ultimate FSG",t),function(e){if(v("showSpeakerOnWorld")){const t=v("playNewMessageSound")
wa=da({prefVal:t,checkId:"fshSoundCheck",onClass:"soundOn",onTip:"Turn Off Sound when you have a new log message",offClass:"soundOff",offTip:"Turn On Sound when you have a new log message",worldName:e})}}(ha),function(t){const a=e.huntingMode
ka=da({prefVal:a,checkId:"fshHuntCheck",onClass:"huntOn",onTip:"Hunting mode is ON",offClass:"huntOff",offTip:"Hunting mode is OFF",worldName:t})}(ha)}const Va=[[e=>e===wa,function(){g("playNewMessageSound",!v("playNewMessageSound"))}],[e=>e===ka,function(){e.huntingMode=!e.huntingMode,g("huntingMode",e.huntingMode)}]],Aa=[[e=>e===ba,function(e){N(e),GameData.doAction(12,401,{},0)}],[e=>e===ga,function(){G(d())}],[e=>e===va,function(){window.open(x+T+"map","fsMap")}],[e=>e===ya,function(){const e=GameData.realm()
window.open(`${E}realms${T}view&realm_id=${e.id}`,"mapUfsg")}]]
function Ba(){ha||(ha=a({className:"fshCurveContainer",id:"fshWorldButtonContainer"}),Ma(),f(ha,je(Aa)),H(ha,"change",je(Va)),S(ha,n("worldCoord")))}function Sa(e,t){ma&&t.b.minlevel&&(ca(),o(t.b.minlevel,ma))}function Ha(e,t){pa&&o(t.b,pa)}function $a(e){return!e||!e.response||!e.response.data}let Na,Ga,xa,Ta,Ea,Pa,Fa,Ra,Oa,Ia,_a,ja,qa,Ya,Ka,za,Ua,Qa,Wa,Ja,Xa,Za,en,tn,an,nn,rn,on,sn,un,ln,cn,fn,dn,hn
function mn(e){return e.player_name}function pn(e){!function(e){Ta=e.defenders.map(mn)}(e),Na?P("",Na):Na=a({className:"body"}),function(e){Ga=a({className:"fshFloatLeft fshRelicLeftDiv"}),s(Na,Ga),e.is_owner&&s(Ga,Ke(Ta)),xa=Fe({className:"custombutton",textContent:"Fetch Stats"}),s(Ga,xa)}(e)
const t=n("dialog-relic")
s(t,Na)}const bn=[e=>"lastUpdate"!==e,e=>!Ta.includes(e),e=>Ea[e].last_login,e=>Number(Ea[e].last_login)<Pa,e=>Number(Ea[e].last_login)>Fa,e=>Ea[e].level<400||Ea[e].level>421,e=>Ea[e].level<441||Ea[e].level>450]
function gn(e,t){return t(e)}function vn(e){return bn.every(l(gn,e))}function yn(e){return`<a href="${O}${Ea[e].id}">${e}</a>`}function wn(e){Ea=e,Pa=I-120,Fa=I-604800
const t=R(Ea).filter(vn).map(yn)
c(Na,'<div class="fshFloatLeft fshRelicLowDiv"><table class="relicT"><thead><tr><th>'+t.length.toString()+" Offline guild members not at relic:</th></tr></thead>"+`<tbody><tr><td>${t.join(" ")}</td></tr></tbody></table></div>`)}function kn(e){F(xa)
const t=v("hideRelicOffline")
e.is_owner&&!t&&Ye(!0).then(wn),c(Ga,'<table class="relicT"><thead><tr><th colspan="2">Processing</th></tr></thead><tbody><tr><td class="fshGreen" colspan="2" id="ProcessingStatus">Parsing defending guild stats ...</td></tr></tbody><thead><tr><th colspan="2">Assumptions</th></tr></thead><tbody><tr><td colspan="2" class="fshGrey">Above calculations include Constitution, Fortitude, Nightmare Visage, Chi Strike, Sanctuary, Terrorize and Flinch bonus calculations (in that order) on both the defending group and attacking group.</td></tr></tbody></table>'),hn=n("ProcessingStatus")
const r=a({className:"fshFloatLeft fshRelicMidDiv",innerHTML:'<table class="relicT relicS"><thead><tr><th colspan="2">Defending Guild Stats</th></tr></thead><tbody><tr><td>Relic Count:</td><td id="relicCount">0</td></tr><tr><td>Lead Defender Bonus:</td><td id="LDPercentage">0</td></tr><tr><td>Lead Defender Cloaked:</td><td id="LDCloaked">No</td></tr></tbody><thead><tr><th colspan="2">Other Defender Stats</th></tr></thead><tbody><tr><td>Raw Attack:</td><td class="fshGrey" id="attackValue">0</td></tr><tr><td>Attack w/ buffs:</td><td id="attackValueBuffed">0</td></tr><tr><td>Raw Defense:</td><td class="fshGrey" id="defenseValue">0</td></tr><tr><td>Defense w/buffs:</td><td id="defenseValueBuffed">0</td></tr><tr><td>Raw Armor:</td><td class="fshGrey" id="armorValue">0</td></tr><tr><td>Armor w/ buffs:</td><td id="armorValueBuffed">0</td></tr><tr><td>Raw Damage:</td><td class="fshGrey" id="damageValue">0</td></tr><tr><td>Damage w/ buffs:</td><td id="damageValueBuffed">0</td></tr><tr><td>Raw HP:</td><td class="fshGrey" id="hpValue">0</td></tr><tr><td>HP w/ buffs:</td><td id="hpValueBuffed">0</td></tr><tr><td>Cloaked:</td><td id="defendersCloaked">0</td></tr><tr><td>Processed:</td><td id="defendersProcessed">0</td></tr></tbody></table>'})
s(Na,r),Ra=n("relicCount"),Oa=n("LDPercentage"),Ia=n("LDCloaked"),_a=n("attackValue"),ja=n("attackValueBuffed"),qa=n("defenseValue"),Ya=n("defenseValueBuffed"),Ka=n("armorValue"),za=n("armorValueBuffed"),Ua=n("damageValue"),Qa=n("damageValueBuffed"),Wa=n("hpValue"),Ja=n("hpValueBuffed"),Xa=n("defendersCloaked"),Za=n("defendersProcessed")
const o=a({className:"fshFloatLeft fshRelicRightDiv",innerHTML:'<table class="relicT relicS"><thead><tr><th colspan="2">Adjusted defense values</th></tr></thead><tbody><tr><td>DC225:</td><td id="DC225">0</td></tr><tr><td>DC175:</td><td id="DC175">0</td></tr><tr><td colspan="2">&nbsp;</td></tr></tbody><thead><tr><th colspan="2">Attacking Group Stats</th></tr></thead><tbody><tr><td>Raw Group Attack:</td><td class="fshGrey" id="GroupAttack"></td></tr><tr><td>Group Attack w/ buffs:</td><td id="GroupAttackBuffed"></td></tr><tr><td>Raw Group Defense:</td><td class="fshGrey" id="GroupDefense"></td></tr><tr><td>Group Defense w/ buffs:</td><td id="GroupDefenseBuffed"></td></tr><tr><td>Raw Group Armor:</td><td class="fshGrey" id="GroupArmor"></td></tr><tr><td>Group Armor w/ buffs:</td><td id="GroupArmorBuffed"></td></tr><tr><td>Raw Group Damage:</td><td class="fshGrey" id="GroupDamage"></td></tr><tr><td>Group Damage w/ buffs:</td><td id="GroupDamageBuffed"></td></tr><tr><td>Raw Group HP:</td><td class="fshGrey" id="GroupHP"></td></tr><tr><td>Group HP w/ buffs:</td><td id="GroupHPBuffed"></td></tr></tbody></table>'})
s(Na,o),en=n("DC225"),tn=n("DC175"),an=n("GroupAttack"),nn=n("GroupAttackBuffed"),rn=n("GroupDefense"),on=n("GroupDefenseBuffed"),sn=n("GroupArmor"),un=n("GroupArmorBuffed"),ln=n("GroupDamage"),cn=n("GroupDamageBuffed"),fn=n("GroupHP"),dn=n("GroupHPBuffed")}let Cn
function Ln(e){const t=_(e),a=j('#pCC img[src*="/relics/"]',t).length
var n
o(a,Ra),Cn=1===(n=a)?1.5:He(1-n/10,2),o(String(100*Cn)+"%",Oa)}function Dn(e,t){return e>10*t||e<t?e:10*t}const Mn=[["levelValue","level"],["attackValue","attack"],["attackBonus","bonus_attack"],["defenseValue","defense"],["defenseBonus","bonus_defense"],["armorValue","armor"],["armorBonus","bonus_armor"],["damageValue","damage"],["damageBonus","bonus_damage"],["hpValue","hp"],["hpBonus","bonus_hp"],["killStreakValue","killstreak"]]
function Vn(e,t,a){e[a[0]]=Number(t[a[1]])}const An=[["counterAttackLevel","Counter Attack"],["doublerLevel","Doubler"],["deathDealerLevel","Death Dealer"],["darkCurseLevel","Dark Curse"],["holyFlameLevel","Holy Flame"],["constitutionLevel","Constitution"],["sanctuaryLevel","Sanctuary"],["flinchLevel","Flinch"],["nightmareVisageLevel","Nightmare Visage"],["superEliteSlayerLevel","Super Elite Slayer"],["fortitudeLevel","Fortitude"],["chiStrikeLevel","Chi Strike"],["terrorizeLevel","Terrorize"],["barricadeLevel","Barricade"],["reignOfTerrorLevel","Reign Of Terror"],["anchoredLevel","Anchored"],["severeConditionLevel","Severe Condition"],["entrenchLevel","Entrench"],["cloakLevel","Cloak"]]
function Bn(e,t,a){e[a[0]]=t[a[1]]||0}function Sn(e){const t=We(e._skills),a={}
return function(e,t){Mn.forEach(l(Vn,e,t))}(a,e),function(e,t){An.forEach(l(Bn,e,t))}(a,t),a.superEliteSlayerMultiplier=He(.002*a.superEliteSlayerLevel,2),Se(a.armorValue)&&function(e){e.attackValue=Dn(e.attackBonus,e.levelValue),e.defenseValue=Dn(e.defenseBonus,e.levelValue),e.armorValue=Dn(e.armorBonus,e.levelValue),e.damageValue=Dn(e.damageBonus,e.levelValue),e.hpValue=e.hpBonus}(a),a}let Hn,$n,Nn,Gn,xn,Tn,En,Pn,Fn,Rn,On,In,_n
function jn(e){return Math.round(e*Cn)}function qn(){yt(Hn,_a),yt(Nn,qa),yt(Gn,Ka),yt(xn,Ua),yt(En,Wa),o(Pn,Xa),Fn+=1,o(Fn,Za)}function Yn(e){const t=function(e){return Math.ceil(On.attack*(.0025*q(e["Nightmare Visage"],0)))}(e)
On.attack-=t,function(){const e=Math.ceil(On.attack*Rn.flinchLevel*.001)
yt(On.attack-e,nn)}()
const a=function(e){return Math.ceil(On.defense*(1+.001*q(e.Constitution,0)))}(e)
yt(a+t,on),function(e){yt(On.armor+Math.floor(On.armor*q(e.Sanctuary,0)*.001),un)}(e)
const n=function(e,t){return Math.ceil(t*q(e.Fortitude,0)*.001)}(e,a)
!function(e){yt(On.hp+e,dn)}(n),function(e,t){const a=Math.ceil((On.hp+t)*q(e["Chi Strike"],0)*.001),n=Math.ceil(On.damage*Rn.terrorizeLevel*.001)
yt(On.damage+a-n,cn)}(e,n)}function Kn(){o("Processing attacking group stats ... ",hn),In&&(On.attack-=In.attack,On.defense-=In.defense,On.armor-=In.armor,On.damage-=In.damage,On.hp-=In.hp),yt(On.attack,an),yt(On.defense,rn),yt(On.armor,sn),yt(On.damage,ln),yt(On.hp,fn)
const e=We(GameData.player().buffs)
Yn(e),function(e){const t=Math.ceil($n*q(e.Flinch,0)*.001)
yt($n-t,ja)}(e),function(e){const t=Math.ceil(Tn*q(e.Terrorize,0)*.001)
yt(Tn-t,Qa)}(e),o("Done.",hn)}function zn(){o("Processing defending guild stats ... ",hn),Hn+=jn(Rn.attackValue),Nn+=jn(Rn.defenseValue),Gn+=jn(Rn.armorValue),xn+=jn(Rn.damageValue),En+=jn(Rn.hpValue),qn()
const e=Math.ceil(Hn*(.0025*Rn.nightmareVisageLevel))
!function(e){$n=Hn-e,yt($n,ja)}(e)
const t=Math.ceil(Nn*(1+.001*Rn.constitutionLevel))
!function(e,t){const a=t+e
yt(a,Ya),yt(Math.ceil(.55*a),en),yt(Math.ceil(.65*a),tn)}(e,t),yt(Gn+Math.floor(Gn*Rn.sanctuaryLevel*.001),za)
const a=En+function(e){return Math.ceil(e*Rn.fortitudeLevel*.001)}(t)
yt(a,Ja),function(e){Tn=xn+Math.ceil(e*Rn.chiStrikeLevel*.001),yt(Tn)}(a),0!==Rn.cloakLevel&&o("Yes",Ia),GameData.player().hasGroup&&On?Kn():o("Done.",hn)}function Un(e){const t=Sn(e)
Hn+=Math.round(t.attackValue*Y),Nn+=Math.round(t.defenseValue*Y),Gn+=Math.round(t.armorValue*Y),xn+=Math.round(t.damageValue*Y),En+=Math.round(t.hpValue*Y),0!==t.cloakLevel&&(Pn+=1),qn()}function Qn(e){Rn=Sn(e)}function Wn(e){On=e}function Jn(e){In=e}function Xn(e){o(e.message,hn)}function Zn(e){const t=_(e),a=Q('#pCC a[href*="confirmDisband"]',t)
if(!a)return
const n=function(e){const t=e.previousElementSibling.href,a=[ze(t).then(Wn)]
return function(e){return-1!==e.parentNode.parentNode.previousElementSibling.previousElementSibling.innerHTML.indexOf('"#000099"')}(e)&&a.push(Ue().then(Jn)),a}(a)
return Oe(n)}function er(e,t){return 0===t?W(e).then(Qn):W(e).then(Un).catch(Xn)}function tr(){let e=[U({cmd:"guild",subcmd:"view",guild_id:_n.controlled_by.guild_id}).then(Ln)]
return GameData.player().hasGroup&&e.push(U({cmd:"guild",subcmd:"groups"}).then(Zn)),e=e.concat(Ta.map(er)),e}function ar(){kn(_n),Hn=0,Nn=0,Gn=0,xn=0,En=0,Pn=0,Fn=0
const e=tr()
Ie(e,zn)}function nr(e,t){$a(t)||(_n=t.response.data,_n.defenders.length>0&&(pn(_n),z(xa,"click",ar)))}const rr=[]
function or(e){return $a(e)||rr.push(e),e}function ir(e,t){return e===Number(t.response.data.id)}function sr(e,t){e(t)}function ur(e,t){const a=rr.find(l(ir,e))
return a?function(e){return new Promise(t=>{J(3,sr,[t,e])})}(a):_e({a:1,id:e,passback:t}).then(or)}let lr,cr,fr,dr,hr,mr
function pr(e,t){return X(Z(t,e))}function br(){var e
lr=GameData.player().level,e=n("statbar-character-tooltip-stats"),fr=pr(e,re),cr=pr(e,ee),hr=pr(e,te),dr=pr(e,ae),mr=pr(e,ne)}function gr(e){return`<tr><td colspan="2">${e.name}:</td><td colspan="2">${e.value}</td></tr>`}function vr(e,t,a){return function(e){return`<table><tr><td><img src="${oe}creatures/${e.image_id}.png" height="200" width="200"></td><td rowspan="2"><table width="400"><tr><td class="header" colspan="4" class="fshCenter">Statistics</td></tr>`}(e)+function(e,t){return`<tr><td>Class:&nbsp;</td><td width="40%">${e.creature_class}</td><td>Level:&nbsp;</td><td width="40%">${e.level} (your level:<span class="${t}">${lr}</span>)</td></tr>`}(e,a)+function(e){return`<tr><td>Attack:&nbsp;</td><td width="40%">${e.attack} (your defense:<span class="fshYellow">${cr}</span>)</td><td>Defense:&nbsp;</td><td width="40%">${e.defense} (your attack:<span class="fshYellow">${fr}</span>)</td></tr>`}(e)+function(e){return`<tr><td>Armor:&nbsp;</td><td width="40%">${e.armor} (your damage:<span class="fshYellow">${dr}</span>)</td><td>Damage:&nbsp;</td><td width="40%">${e.damage} (your armor:<span class="fshYellow">${hr}</span>)</td></tr>`}(e)+function(e,t){return`<tr><td>HP:&nbsp;</td><td width="40%">${e.hp} (your HP:<span class="fshYellow">${mr}</span>)(1H: <span class="fshRed">${t}</span>)</td><td>Gold:&nbsp;</td><td width="40%">${e.gold}</td></tr>`}(e,t)+'<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Enhancements</td></tr>'+function(e){return 0===e.enhancements.length?'<tr><td colspan="4">[no enhancements]</td></tr>':e.enhancements.map(gr).join("")}(e)+function(e){return`<tr><td colspan="4" height="5"></td></tr><tr><td class="header" colspan="4" class="fshCenter">Description</td></tr><tr><td colspan="4">${e.description}</td></tr><tr><td colspan="4" height="5"></td></tr></table></td></tr><tr><td class="fshCenter"><b>${e.name}</b></td></tr></table>`}(e)}function yr(t){if(!$a(t))return function(t){const a=Math.ceil(t.hp*e.hpVariable+t.armor*e.generalVariable)
let n="fshYellow"
return br(),lr>t.level&&(n="fshRed"),vr(t,a,n)}(t.response.data)}const wr=["verb","view","tip-static"]
function kr(e,t){const a=yr(t)
e.set("content.text",a)}function Cr(e,t,a){return ur(GameData.actions()[e].data.id,e).then(l(kr,a)),"Loading..."}function Lr(e,t){se("NewMap","CreatureInfo")
const a=ue((n=t).parentNode.children).indexOf(n)
var n,r,o
e.classList.add("fshTip"),r=e,o=l(Cr,a),$(r).qtip({overwrite:!0,show:{event:"mouseover",ready:!0},style:{classes:"qtip-tipsy qtip-custom"},position:{my:"center right",at:"center left",effect:!1,viewport:$(window)},content:{text:o},hide:{effect:!1}})}function Dr(t){if(!e.showCreatureInfo)return
const{target:a}=t,n=a.parentNode.parentNode.parentNode;(function(e,t){return qe(wr,e)&&!ie("fshTip",e)&&ie("creature",t)})(a,n)&&Lr(a,n)}function Mr(){return le({subcmd:"scouttower"})}function Vr(e,t){const a=e.insertCell(-1)
return[a.colSpan]=t,t[2]&&(a.className="header"),s(a,t[1]),a}function Ar(e,t,a){const n=e.insertRow(-1)
return a&&(n.className="fshBlue"),function(e,t){t.forEach(l(Vr,e))}(n,t),n}function Br(e,t){Ar(e,t[0],t[1])}function Sr(e,t){t.forEach(l(Br,e))}let Hr,$r,Nr,Gr,xr,Tr,Er,Pr,Fr,Rr,Or,Ir,_r,jr,qr,Yr,Kr,zr,Ur,Qr,Wr,Jr,Xr,Zr,eo,to,ao,no
function ro(){$r=Gt("Current"),Nr=Gt("Kills"),Gr=Gt("Member"),xr=Gt("% of Total"),Tr=Gt("Status"),Er=Gt("Titan HP"),Pr=Gt("Total"),Fr=Gt("Your Guild")}function oo(){for(;Kr.rows.length>7;)Kr.deleteRow(7)}function io(){const e=i()
return s(e,Rr),Ge(e,"/"),s(e,Or),e}function so(e){const t=i()
return s(t,e),Ge(t,"%"),t}function uo(){Ur=null,zr&&!zr.classList.contains("fshHide")&&(t(zr,!0),o("",Rr),o("",Or),o("",Ir),o("",_r),o("",jr),P("",qr),P("",Yr),oo())}function lo(e){return 0===e.type&&(Ur=e.base_creature_id,!0)}function co(){if(zr)t(zr,!1)
else{const e=n("actionContainer")
zr=a({className:"fshActionBox titanInfo"}),Rr=i(),Or=i(),Ir=i(),_r=i(),jr=i(),qr=i(),Yr=i(),Kr=Pe({className:"fshCenter"}),ro(),Sr(Kr,[[[[2,Er,!0],[4,Fr,!0]]],[[[2,io()],[4,Ir]]],[[[2,$r,!0],[4,so(_r)]],!0],[[[2,Pr,!0],[4,so(jr)]],!0],[[[2,Tr,!0],[4,qr]],!0],[[[6,Yr]]],[[[2,Gr,!0],[2,Nr,!0],[2,xr,!0]]]]),s(zr,Kr),s(e,zr)}}function fo(e){return e<=0?'<span class="fshGreen cooldown">No active cooldown</span>':`<span class="fshMaroon cooldown">Cooldown until: ${function(e){const t=new Date(de+1e3*e)
return`${ce(t.getHours())}:${ce(t.getMinutes())} ${ce(t.getDate())}/${fe[t.getMonth()]}/${t.getFullYear()}`}(e)}</span>`}function ho(e){o(e.current_hp,Rr),o(e.max_hp,Or),o(e.kills,Ir),o(function(e){return $e(Je(e.max_hp-e.current_hp,e.kills),2)}(e),_r),o(function(e){return $e(100*e.kills/e.max_hp,2)}(e),jr),P(function(e){return Xe(e.kills,e.max_hp,e.current_hp)}(e),qr),P(fo(e.cooldown),Yr)}function mo(e,t){return[[[2,Gt(t.player.name)],[2,Gt(t.kills.toString())],[2,Gt($e(100*t.kills/e.kills,2)+"%")]]]}function po(e){return e.realm&&e.creature.base_id===Ur&&e.realm===Hr}function bo(e){const t=e.find(po)
t&&(ho(t),function(e){if(oo(),!e.contributors)return
const t=e.contributors.map(l(mo,e))
Sr(Kr,t)}(t))}function go(t){return e.showTitanInfo&&Be(t)&&t.some(lo)}function vo(e,t){(function(e){return e.s&&Be(e.r)})(t)&&(bo(t.r),go(GameData.realm().dynamic)?Qr=window.setTimeout(e,3e4):uo())}function yo(){Mr().then(l(vo,yo))}function wo(e){Qr&&(window.clearTimeout(Qr),Qr=null),go(e)?(co(),yo()):uo()}function ko(e){var t
e.dynamic&&(t=e.name,Hr=t,wo(e.dynamic))}function Co(e,t){(function(e){return e.realm&&e.realm.name})(t)&&ko(t.realm)}function Lo(e){const t=e.response.response,a=e.response.msg
let n
if(0!==t){const e=a.indexOf("<")
n=-1!==e?a.substring(0,e):a}else n=`You purchased ${e.response.data.name} for ${u(e.response.data.cost)} gold.`
c(ao,n+"<br>")}function Do(){GameData.doAction(14,3,{id:Wr.id,item_id:Wr.itemId},0),Xr.close()}function Mo(){const e=xe(eo.value)
if(!e)return
const t=[]
for(let a=1;a<e;a+=1)t.push(_e({a:14,d:0,id:Wr.id,item_id:Wr.itemId}).then(Lo))
Ie(t,Do)}function Vo(){Zr?o("",ao):(Zr=a({className:"fshClear",textContent:"Select how many to quick-buy:"}),eo=Ne({id:"buyAmount",className:"fshNumberInput",min:1,max:99,value:1,type:"number"}),s(Zr,eo),to=Fe({textContent:"Quick-buy"}),f(to,Mo),s(Zr,to),ao=a(),s(Zr,ao),s(Jr,Zr))}function Ao(e,t){Wr=t,Jr=Jr||n("shopDialogConfirm"),Jr&&(Xr=Xr||$(Jr).data("hcsWorldDialogShopConfirm"),Xr&&Vo())}function Bo(e){no[e.name]?no[e.name].seen&&(no[e.name].seen+=1):(no[e.name]={seen:1},function(e,t){t.creature_class=e.creature_class,t.image_id=e.image_id,t.level=Number(e.level),t.type=e.type}(e,no[e.name]))}function So(e,t,a){return t?e(t,a):a}function Ho(e,t){const a=e||{}
return a.min=So(Math.min,a.min,t),a.max=So(Math.max,a.max,t),a}const $o=["attack","armor","damage","defense","hp"]
function No(e,t,a){const n=Ho(t[a],Number(e[a]));(function(e,t){return!e||e.min!==t.min||e.max!==t.max})(t[a],n)&&(t[a]=n)}function Go(e,t){e[t.name]=Ho(e[t.name],Number(t.value))}function xo(e){no||(no={}),Bo(e),function(e,t){$o.forEach(l(No,e,t))}(e,no[e.name]),function(e,t){(function(e){return e.enhancements&&e.enhancements.length>0})(e)&&(t.enhancements=t.enhancements||{},e.enhancements.forEach(l(Go,t.enhancements)))}(e,no[e.name]),k("fsh_monsterLog",no)}function To(e){no=e||{}}const Eo=[]
function Po(t){var a
$a(t)||(se("NewMap","MonsterLog"),a=t.response.data,e.showMonsterLog&&xo(a))}function Fo(e,t){return e.id===t.id}function Ro(e,t){6!==e.type||function(e){if(Eo.find(l(Fo,e.data)))return!0
Eo.push(e.data)}(e)||ur(e.data.id,t).then(Po)}function Oo(){e.showMonsterLog&&GameData.actions().forEach(Ro)}function Io(e){return le(be({subcmd:"groups"},e))}function _o(e){return function(e){return Io({subcmd2:"viewstats",group_id:e})}(e)}function jo(){return Io({subcmd2:"view"})}function qo(e){return e.numberOfCreatureHitsTillDead-e.numberOfHitsRequired<=1?", dies on miss":", survives a miss"}const Yo=[[e=>"-"===e.playerHits&&"-"===e.creatureHits,()=>"Unresolved"],[e=>"-"===e.playerHits,()=>"Player dies"],[e=>1===e.playerHits,e=>"Player 1 hits"+qo(e)],[e=>e.playerHits>1,e=>"Player > 1 hits"+qo(e)]]
function Ko(e,t){return t[0](e)}function zo(e){e.playerHits=function(e){return"-"===e.numberOfCreatureHitsTillDead?e.numberOfHitsRequired:function(e){return"-"===e.numberOfHitsRequired||e.numberOfHitsRequired>e.numberOfCreatureHitsTillDead}(e)?"-":e.numberOfHitsRequired}(e),e.creatureHits=function(e){return"-"===e.numberOfHitsRequired?e.numberOfCreatureHitsTillDead:function(e){return"-"===e.numberOfCreatureHitsTillDead||e.numberOfCreatureHitsTillDead>e.numberOfHitsRequired}(e)?"-":e.numberOfCreatureHitsTillDead}(e),e.fightStatus=function(e){const t=Yo.find(l(Ko,e))
return t?t[1](e):"Unknown"}(e)}function Uo(e){e.creatureHitByHowMuch>=0?function(e){const t=e.generalVariable*e.creature.damage
t<e.overallArmorValue?e.numberOfCreatureHitsTillDead=e.overallHPValue:e.numberOfCreatureHitsTillDead=Math.ceil(e.overallHPValue/(t-e.overallArmorValue))}(e):e.numberOfCreatureHitsTillDead="-"}function Qo(e){!function(e){const t=function(e){return e.callback.groupExists?e.callback.groupArmorValue:e.player.armorValue}(e)
e.overallArmorValue=t+Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}(e),function(e){e.player.sanctuaryLevel>0&&(e.extraNotes+=`Sanc Bonus Armor = ${Math.floor(e.player.armorValue*e.player.sanctuaryLevel*.001)}<br>`)}(e),function(e){e.terrorizeEffect=Math.floor(e.creature.damage*e.player.terrorizeLevel*.001)}(e),function(e){e.player.terrorizeLevel>0&&(e.extraNotes+=`Terrorize Creature Damage Effect = ${-1*e.terrorizeEffect}<br>`)}(e),e.creature.damage-=e.terrorizeEffect,function(e){e.creatureDamageDone=Math.ceil(e.generalVariable*e.creature.damage-e.overallArmorValue+e.overallHPValue)}(e),Uo(e)}function Wo(e){const t=function(e){return e.callback.groupExists?e.callback.groupAttackValue:e.player.attackValue}(e)
e.player.darkCurseLevel>0&&(e.extraNotes+=`DC Bonus Attack = ${Math.floor(e.creature.defense*e.player.darkCurseLevel*.002)}<br>`),e.nightmareVisageAttackMovedToDefense=Math.floor((t+e.counterAttackBonusAttack)*e.player.nightmareVisageLevel*.0025),e.player.nightmareVisageLevel>0&&(e.extraNotes+=`NMV Attack moved to Defense = ${e.nightmareVisageAttackMovedToDefense}<br>`),e.overallAttackValue=t+e.counterAttackBonusAttack-e.nightmareVisageAttackMovedToDefense,e.hitByHowMuch=function(e){const t=e.creature.defense-e.creature.defense*e.player.darkCurseLevel*.002
return 3===e.combatEvaluatorBias?e.overallAttackValue-Math.ceil(t)-50:e.overallAttackValue-Math.ceil(e.attackVariable*t)}(e)}function Jo(e){e.lowestCALevelToStillHit=Math.max(Math.ceil((e.counterAttackBonusAttack-e.hitByHowMuch+1)/e.player.attackValue/.0025),0),e.lowestCALevelToStillKill=Math.max(Math.ceil((e.counterAttackBonusDamage-e.damageDone+1)/e.player.damageValue/.0025),0)}function Xo(e){Jo(e),e.lowestFeasibleCALevel=Math.max(e.lowestCALevelToStillHit,e.lowestCALevelToStillKill),e.extraNotes+=`Lowest CA to still 1-hit this creature = ${e.lowestFeasibleCALevel}<br>`,0!==e.lowestFeasibleCALevel&&function(e){e.extraAttackAtLowestFeasibleCALevel=Math.floor(.0025*e.player.attackValue*e.lowestFeasibleCALevel),e.extraDamageAtLowestFeasibleCALevel=Math.floor(.0025*e.player.damageValue*e.lowestFeasibleCALevel),e.extraNotes+=`Extra CA Att/Dam at this lowered CA level = ${e.extraAttackAtLowestFeasibleCALevel} / ${e.extraDamageAtLowestFeasibleCALevel}<br>`}(e),e.extraStaminaPerHitAtLowestFeasibleCALevel=function(e){return e.player.counterAttackLevel>0?Math.ceil(.0025*(1+e.player.doublerLevel/50)*e.lowestFeasibleCALevel):0}(e),e.extraStaminaPerHitAtLowestFeasibleCALevel<e.extraStaminaPerHit?e.extraNotes+=`Extra Stam Used at this lowered CA level = ${e.extraStaminaPerHitAtLowestFeasibleCALevel}<br>`:e.extraNotes+="No reduction of stam used at the lower CA level<br>"}function Zo(e){(function(e){return e.player.counterAttackLevel>0&&1===e.numberOfHitsRequired})(e)&&Xo(e),function(e){return"-"===e.numberOfHitsRequired||1!==e.numberOfHitsRequired}(e)&&function(e){Jo(e),function(e){e.lowestCALevelToStillHit>175?e.extraNotes+="Even with CA175 you cannot hit this creature<br>":0!==e.lowestCALevelToStillHit&&(e.extraNotes+=`You need a minimum of CA${e.lowestCALevelToStillHit} to hit this creature<br>`)}(e),function(e){e.lowestCALevelToStillKill>175?e.extraNotes+="Even with CA175 you cannot 1-hit kill this creature<br>":0!==e.lowestCALevelToStillKill&&(e.extraNotes+=`You need a minimum of CA${e.lowestCALevelToStillKill} to 1-hit kill this creature<br>`)}(e)}(e)}function ei(e){!function(e){const t=function(e){return e.callback.groupExists?e.callback.groupHPValue:e.player.hpValue}(e),{fortitudeLevel:a}=e.player
e.fortitudeExtraHPs=Math.floor(t*a*.001),a>0&&(e.extraNotes+=`Fortitude Bonus HP = ${e.fortitudeExtraHPs}<br>`),e.overallHPValue=t+e.fortitudeExtraHPs}(e),function(e){const{chiStrikeLevel:t}=e.player
e.chiStrikeExtraDamage=Math.floor(e.overallHPValue*t*.001),t>0&&(e.extraNotes+=`Chi Strike Bonus Damage = ${e.chiStrikeExtraDamage}<br>`)}(e)
const t=function(e){return e.callback.groupExists?e.callback.groupDamageValue:e.player.damageValue}(e)
if(e.overallDamageValue=t+e.deathDealerBonusDamage+e.counterAttackBonusDamage+e.holyFlameBonusDamage+e.chiStrikeExtraDamage,e.damageDone=Math.floor(e.overallDamageValue-(e.generalVariable*e.creature.armor+e.hpVariable*e.creature.hp)),e.hitByHowMuch>0){let t=1
e.overallDamageValue>=e.generalVariable*e.creature.armor&&(t=e.overallDamageValue-e.generalVariable*e.creature.armor),e.numberOfHitsRequired=Math.ceil(e.hpVariable*e.creature.hp/t)}else e.numberOfHitsRequired="-"}function ti(e){return e.callback.groupExists?e.callback.groupDefenseValue:e.player.defenseValue}function ai(e){e.overallDefenseValue=ti(e)+Math.floor(ti(e)*e.player.constitutionLevel*.001)+e.nightmareVisageAttackMovedToDefense,function(e){e.player.constitutionLevel>0&&(e.extraNotes+=`Constitution Bonus Defense = ${Math.floor(ti(e)*e.player.constitutionLevel*.001)}<br>`)}(e),function(e){e.player.flinchLevel>0&&(e.extraNotes+=`Flinch Bonus Attack Reduction = ${Math.floor(e.creature.attack*e.player.flinchLevel*.001)}<br>`)}(e),e.creatureHitByHowMuch=Math.floor(e.attackVariable*e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue),3===e.combatEvaluatorBias&&(e.creatureHitByHowMuch=Math.floor(e.creature.attack-e.creature.attack*e.player.flinchLevel*.001-e.overallDefenseValue-50))}function ni(e){e.extraNotes="",function(e){e.player.superEliteSlayerLevel>0&&(e.extraNotes+=`SES Stat Reduction Multiplier = ${e.player.superEliteSlayerMultiplier}<br>`)}(e),function(e){e.holyFlameBonusDamage=0,"Undead"===e.creature.class&&(e.holyFlameBonusDamage=Math.max(Math.floor((e.player.damageValue-e.creature.armor)*e.player.holyFlameLevel*.002),0),e.player.holyFlameLevel>0&&(e.extraNotes+=`HF Bonus Damage = ${e.holyFlameBonusDamage}<br>`))}(e),function(e){e.deathDealerBonusDamage=Math.floor(e.player.damageValue*(Math.min(.01*Math.floor(e.player.killStreakValue/5)*e.player.deathDealerLevel,20)/100))}(e),function(e){e.counterAttackBonusAttack=Math.floor(.0025*e.player.attackValue*e.player.counterAttackLevel),e.counterAttackBonusDamage=Math.floor(.0025*e.player.damageValue*e.player.counterAttackLevel)}(e),function(e){e.extraStaminaPerHit=0,e.player.counterAttackLevel>0&&(e.extraStaminaPerHit=Math.ceil(.0025*(1+e.player.doublerLevel/50)*e.player.counterAttackLevel))}(e),function(e){e.player.deathDealerLevel>0&&(e.extraNotes+=`DD Bonus Damage = ${e.deathDealerBonusDamage}<br>`)}(e),function(e){e.player.counterAttackLevel>0&&(e.extraNotes+=`CA Bonus Attack/Damage = ${e.counterAttackBonusAttack} / ${e.counterAttackBonusDamage}<br>CA Extra Stam Used = ${e.extraStaminaPerHit}<br>`)}(e)}let ri,oi,ii,si,ui,li,ci,fi,di,hi
function mi(){return ra(oi)?"Remove from do not kill list":"Add to the do not kill list"}function pi(){o(mi(),ii)}function bi(){const t=e.doNotKillList.indexOf(oi);-1===t?e.doNotKillList.push(oi):e.doNotKillList.splice(t,1),pi(),g("doNotKillList",e.doNotKillList.join()),ia()}function gi(){ii?pi():function(){ii=Fe({className:"fshBl",textContent:mi(),type:"button"})
const e=a({className:"description",innerHTML:'<span class="ui-helper-hidden-accessible"><input type="text"></span>'})
s(e,ii),s(ri,e),f(ii,bi)}()}function vi(e,t){!function(e){if(!ri){const t=Z("body",e)
1===t.length&&([ri]=t)}}(t),ri&&(oi=e.trim(),gi())}function yi(){li||(ui||(ui=a(),s(si,ui),s(si,a({innerHTML:'<span class="fshFooter">*Does include CA, DD, HF, DC, Flinch, Super Elite Slayer, NMV, Sanctuary, Constitution, Fortitude, Chi Strike and Terrorize (if active) and allow for randomness (1.1053). Constitution, NMV, Fortitude and Chi Strike apply to group stats.</span>'}))),li=a(),s(ui,li))}function wi(e){yi(),P(e,li)}function ki(e){ci||(yi(),ci=a(),s(ui,ci)),P(e,ci)}function Ci(e,t){const a={name:e.name,class:e.creature_class,attack:Number(e.attack),defense:Number(e.defense),armor:Number(e.armor),damage:Number(e.damage),hp:Number(e.hp)}
return function(e,t,a){3===a&&(t.attack-=Math.ceil(t.attack*e),t.defense-=Math.ceil(t.defense*e),t.armor-=Math.ceil(t.armor*e),t.damage-=Math.ceil(t.damage*e),t.hp-=Math.ceil(t.hp*e))}(t,a,e.type),a}function Li(t,a,n){const r={}
r.callback=n,r.player=Sn(a),function(t){t.combatEvaluatorBias=e.combatEvaluatorBias,t.attackVariable=1.1053,t.generalVariable=e.generalVariable,t.hpVariable=e.hpVariable}(r),r.creature=Ci(t.response.data,r.player.superEliteSlayerMultiplier),function(e){ni(e),Wo(e),ei(e),ai(e),Qo(e),zo(e),Zo(e)}(r),r.evaluatorHTML=function(e){return`<table width="100%"><tbody>${function(e){return`<tr><td bgcolor="#CD9E4B" colspan="4" align="center">${function(e){return e.callback.groupExists?"Group ":""}(e)}Combat Evaluation</td></tr>`}(e)}${function(e){return`<tr><td align="right"><span style="color:#333333">Will I hit it? </td><td align="left">${function(e){return e.hitByHowMuch>0?"Yes":"No"}(e)}</td><td align="right"><span style="color:#333333">Extra Attack: </td><td align="left">( ${e.hitByHowMuch} )</td></tr>`}(e)}${function(e){return`<tr><td align="right"><span style="color:#333333"># Hits to kill it? </td><td align="left">${e.numberOfHitsRequired}</td><td align="right"><span style="color:#333333">Extra Damage: </td><td align="left">( ${e.damageDone} )</td></tr>`}(e)}${function(e){return`<tr><td align="right"><span style="color:#333333">Will I be hit? </td><td align="left">${function(e){return e.creatureHitByHowMuch>=0?"Yes":"No"}(e)}</td><td align="right"><span style="color:#333333">Extra Defense: </td><td align="left">( ${-1*e.creatureHitByHowMuch} )</td></tr>`}(e)}${function(e){return`<tr><td align="right"><span style="color:#333333"># Hits to kill me? </td><td align="left">${e.numberOfCreatureHitsTillDead}</td><td align="right"><span style="color:#333333">Extra Armor + HP: </td><td align="left">( ${-1*e.creatureDamageDone} )</td></tr>`}(e)}${function(e){return`<tr><td align="right"><span style="color:#333333"># Player Hits? </td><td align="left">${e.playerHits}</td><td align="right"><span style="color:#333333"># Creature Hits? </td><td align="left">${e.creatureHits}</td></tr>`}(e)}${function(e){return`<tr><td align="right"><span style="color:#333333">Fight Status: </span></td><td align="left" colspan="3"><span>${e.fightStatus}</span></td></tr>`}(e)}${function(e){return`<tr><td align="right"><span style="color:#333333">Notes: </span></td><td align="left" colspan="3"><span style="font-size:x-small;">${e.extraNotes}</span></td></tr>`}(e)}</tbody></table>`}(r),n.groupExists?ki(r.evaluatorHTML):wi(r.evaluatorHTML)}function Di(e){return e.members[0].name===d()}function Mi(e){if(Be(e.r))return e.r.find(Di).id}function Vi(e,t,a){if(!a.r||!a.r.attributes)return
const n=a.r.attributes
Li(e,t,{groupExists:!0,groupAttackValue:n[0].value,groupDefenseValue:n[1].value,groupArmorValue:n[2].value,groupDamageValue:n[3].value,groupHPValue:n[4].value})}function Ai(e,t,a){a&&_o(a).then(l(Vi,e,t))}function Bi(e,t){e.player.hasGroup&&function(e,t){jo().then(Mi).then(l(Ai,e,t))}(e,t),Li(e,t,{groupExists:!1})}function Si(e,t){si||(si=n("dialog-viewcreature")),si&&(wi(""),ki(""),function(e){return e.response&&e.response.data}(t)&&(vi(t.response.data.name,si),ve(!0).then(l(Bi,t))))}function Hi(){const t=[,[e.buffs,e.buffsName],[e.buffs2,e.buffs2Name],[e.buffs3,e.buffs3Name]][e.enabledHuntingMode]
Be(t)&&([fi,di]=t)}function $i(t){"enabledHuntingMode"===t.target.name&&(e.enabledHuntingMode=t.target.value,g("enabledHuntingMode",e.enabledHuntingMode),Hi(),GameData.fetch(h))}function Ni(e){const t=Z("verbs",e)
1===t.length&&F(t[0])}function Gi(){if(!hi)return
const e=n("actionList")
C("player",e).forEach(Ni)}const xi={hideSubLvlCreature:function(){e.hideSubLvlCreature=!e.hideSubLvlCreature,g("hideSubLvlCreature",e.hideSubLvlCreature),GameData.fetch(ye)},hidePlayerActions:function(){hi=!hi,g("hidePlayerActions",hi),GameData.fetch(ye)},showCreatureInfo:function(){e.showCreatureInfo=!e.showCreatureInfo,g("showCreatureInfo",e.showCreatureInfo)},showHuntingBuffs:function(){e.showBuffs=!e.showBuffs,g("showHuntingBuffs",e.showBuffs),GameData.fetch(h)},showMonsterLog:function(){e.showMonsterLog=!e.showMonsterLog,g("showMonsterLog",e.showMonsterLog)},showTitanInfo:function(){e.showTitanInfo=!e.showTitanInfo,g("showTitanInfo",e.showTitanInfo),wo(GameData.realm().dynamic)},showBuffInfo:function(){e.showBuffInfo=!e.showBuffInfo,g("showBuffInfo",e.showBuffInfo),Ut()}}
function Ti(e){const t=xi[e.target.name]
D(t)&&(e.target.blur(),t(e))}function Ei(){const e=a({className:"fshCenter fshFten"}),t=a({id:"fshWorldPrefs",innerHTML:`${Ee("showCreatureInfo")}&nbsp;&nbsp;${Ee("showMonsterLog")}&nbsp;&nbsp;${Ee("showTitanInfo")}&nbsp;&nbsp;${Ee("showBuffInfo")}<br>${Ee("hideSubLvlCreature")}&nbsp;&nbsp;${Ee("hidePlayerActions")}&nbsp;&nbsp;${tt()}`})
f(t,Ti),H(t,"change",$i),s(e,t)
const r=a()
s(e,r)
const o=n("worldContainerBelow").children[0]
return S(e,o),r}function Pi(e,t){return e[t.name]=!0,e}function Fi(e,t,a){return e[a.trim()]||t.push(a),t}function Ri(e){P("",e)}function Oi(e,t){const a=t.b.reduce(Pi,{}),n=fi.reduce(l(Fi,a),[])
n.length>0?function(e,t){P(`You are missing some ${di} hunting buffs<br>(${t.join(", ")})`,e)}(e,n):Ri(e)}function Ii(t,a,n){fi&&function(t,a,n){e.showBuffs?Oi(t,n):Ri(t)}(t,0,n)}const _i=[{generalVariable:1.1053,hpVariable:1.1},{generalVariable:1.1,hpVariable:1.053},{generalVariable:1.053,hpVariable:1},{generalVariable:1.1053,hpVariable:1}]
function ji(){var t
e.combatEvaluatorBias=v("combatEvaluatorBias"),e.generalVariable=(t=e.combatEvaluatorBias,_i[t]?_i[t].generalVariable:1.1053),e.hpVariable=function(e){return _i[e]?_i[e].hpVariable:1.1}(e.combatEvaluatorBias)}function qi(e,t){return 6!==t.type||(0!==t.data.creature_type||t.data.level>=e)}function Yi(e){const t=we(e)
return function(e){return!e||!e.actions||0===e.actions.length}(t)?e:(t.actions=t.actions.filter(l(qi,function(e){return e.realm&&e.realm.minlevel||GameData.realm().minlevel}(t))),JSON.stringify(t))}function Ki(t,a){e.hideSubLvlCreature&&function(e){return e.data&&e.data.d&&Qe(e.data.d,ye)}(a)&&(t.dataFilter=Yi)}function zi(t){e[t[0]]=ke(t[1])}function Ui(t){e[t]=ke(t)}function Qi(){[["buffs","huntingBuffs"],["buffs2","huntingBuffs2"],["buffs3","huntingBuffs3"]].forEach(zi),["doNotKillList"].forEach(Ui)}function Wi(t){e[t[0]]=v(t[1])}function Ji(t){e[t]=v(t)}function Xi(){[["buffsName","huntingBuffsName"],["buffs2Name","huntingBuffs2Name"],["buffs3Name","huntingBuffs3Name"],["showBuffs","showHuntingBuffs"]].forEach(Wi),["enabledHuntingMode","hideSubLvlCreature","showTitanInfo","showBuffInfo","showMonsterLog","showCreatureInfo"].forEach(Ji)}function Zi(e){$(`#actionList li.creature-${e.toString()} a.create-group`).hide()}const es=["hideChampionsGroup","hideElitesGroup","hideSEGroup","hideTitanGroup","hideLegendaryGroup"]
function ts(e,t){var a
v(e)&&(a=t+1,$.subscribe(V,l(Zi,a)),Zi(t+1))}function as(e,t){"ACT_REPAIR"===t&&GameData.fetch(Me+h+Ve+ye)}function ns(e){N(e.target)}const rs=[function(){ji(),Qi(),Xi()
const t=Ei()
$.ajaxPrefilter("JSON",Ki),e.hideSubLvlCreature&&GameData.fetch(ye),function(t){Hi()
const a=l(Ii,t)
$.subscribe(m,a),e.showBuffs&&window.initialGameData&&a(null,{b:window.initialGameData.player.buffs})}(t),hi=v("hidePlayerActions"),$.subscribe(V,Gi),Gi()},Le,function(){$.subscribe(ge,Si)},function(){es.forEach(ts)},function(){v("enableCreatureColoring")&&s(document.body,Re("#actionList .creature-1 {color: green;}\n#actionList .creature-2 {color: yellow;}\n#actionList .creature-3 {color: red;}"))},function(){$.subscribe(V,ia),ia(),function(){const e=GameData.doAction
GameData.doAction=la(e)}()},function(){y("fsh_monsterLog").then(To),$.subscribe("-1-success.action-response 4-success.action-response 5-success.action-response 25-success.action-response",Oo),Oo()},function(){$.subscribe(De,as)},function(){v("keepLogs")&&y("fsh_combatLog").then(na)},function(){window.initialGameData&&Co(0,window.initialGameData),$.subscribe(`${he} ${me}`,Co)},function(){$.subscribe(pe,Ao)},function(){$.subscribe(K,nr)},function(){$("#messageCenter").worldMessageCenter({offset:"0 60"})},function(){N("#mapTooltip")},function(){Ba(),$.subscribe(A,Sa),$.subscribe(B,Ha)},function(){Ut(),$.subscribe(`${m} ${p}`,Ut),$.subscribe(b,Qt)},function(){f(n("buffList"),ns)},function(){H(n("actionList"),"mouseover",Dr)}]
export default function(){Ae()&&n("worldPage")&&window.GameData&&Ce(rs)}
//# sourceMappingURL=injectWorld-7e36b4e6.js.map
